webpackJsonp([21],[function(e,t,a){var n=a(35),i=a(50),o=a(1),r=a(4);a(61),a(45),a(20),a(63),a(54),a(75),o(function(){var e=o("#createalbum-pp");e.length||o("#nopublish").click(function(){r.PopOut.alert('<div class="prompt"><h3>账号被屏蔽,请点击<a href="/appeal/account/">解锁</a></h3></div>')});var t=o(document);o.fn.extend({mySubmit:function(e){var t=this;e=o.extend({url:t.attr("action"),type:t.attr("method"),dataType:"json"},e),e.data=e.data?o.extend(this.serializeObject(),e.data):this.serializeObject(),e.before&&e.before(),o.ajax({url:e.url,type:e.type,data:e.data,dataType:e.dataType,mysuccess:function(t){e.success&&e.success(t)}})},serializeObject:function(e){var t={},a=this.serializeArray();return o.each(a,function(){void 0!==t[this.name]?(t[this.name].push||(t[this.name]=[t[this.name]]),t[this.name].push(this.value||"")):t[this.name]=this.value||""}),t},navBottomPosition:function(e){e=o.extend({duration:300,wrap:".nav-wrap",navBottom:".nav-bottom-span",cur:".on",event:"mouseover"},e);var a,n=this.selector,i=function(t){if(t&&0!==t.length){var a=t.parents(e.wrap).find(e.navBottom);if(a.length){var n=t.width(),i=t.position().left,o=a.width();a.position().left;0===o?a.hide().css({left:i,width:n}).fadeIn(300):(a.stop(),a.animate({left:i,width:n,opacity:1},e.duration))}}};i(o(n+e.cur)),"mouseover"===e.event?t.on("mouseover",n,function(){clearTimeout(a),i(o(this))}).on("mouseout",n,function(){a=setTimeout(function(){i(o(n+e.cur))},130)}):t.on(e.event,n,function(){var t=o(this);o(n).removeClass(e.cur.slice(1,e.cur.length)),t.addClass(e.cur.slice(1,e.cur.length)),i(o(n+e.cur))})},moveable:function(e){function t(e){r.on("mousedown",e.area,function(e){o(this);a=void 0===e.offsetX?e.pageX:e.offsetX,n=void 0===e.offsetY?e.pageY:e.offsetY,s=!0}),r.on("mouseup",function(e){s=!1}),r.on("mousemove",e.area,function(t){if(s){t.preventDefault();var i=(o(this),o(e.target)),r=void 0===t.offsetX?t.pageX:t.offsetX,l=void 0===t.offsetY?t.pageY:t.offsetY,c=r-a,d=l-n,u=i.position().top,f=i.position().left,p=i.last().css("margin-left"),h="auto"===p?0:p.slice(0,-2),m=u+d,g=f+c,v=o(e.area).width()-o(e.target).width()-h,b=+h,w=o(e.area).height()-o(e.target).height(),y=0,k=function(e,t){var a={};e&&(a.x=-e,i.css({left:e})),t&&(a.y=-t,i.css({top:t})),a.cbk&&a.cbk(a)};e.limit?(g>=e.limit[0]&&g<=e.limit[1]&&k(g),m>=e.limit[2]&&m<=e.limit[3]&&k(null,m)):(g>=v&&b>=g&&k(g),m>=w&&y>=m&&k(null,m)),a=void 0===t.offsetX?t.pageX:t.offsetX,n=void 0===t.offsetY?t.pageY:t.offsetY}})}var a,n,i=this,r=o(document),s=!1;e=o.extend({target:i.selector+" img",area:i.selector},e),t(e)}}),n.wooInit(["album","article","favalbum","collect","original"],null,[244,530,244,244,244],20,null,!0),o(".people-action").SGfollow("a[data-follow]"),i.init(".people-action"),o(".woo-swa").navBottomPosition({wrap:".people-nav-wrap",cur:".woo-cur",event:"click"});var a=o(".people-header"),s=o("#header-bg-preview"),l=o(".preview-action"),c=o(".people-nav-wrap"),d=712,u=356,f=function(e){var t,n,i,r=o("#woo-holder"),f=(r.position().left,r.position().top,a.find(".header-bg")),p=e.width,h=e.height;d>p?(i=p/d,i*u>h&&(i=h/u),t=p/i,n=h/i):(i=h/u,i*d>p&&(i=p/d),t=p/i,n=h/i),f.each(function(a,i){var r=o(i),s=e.src,l=r.attr("src"),c=r.height(),d=r.width();r.data({ssrc:l,swidth:d,sheight:c,src:s,width:t,height:n,twidth:p,theight:h}),0===a&&(s=o.G.dtImageTrans(s,!0,e.width,e.height,"g")),r.attr("src",s).css({width:t,height:n})}),a.addClass("preview"),s.css({display:"block",opacity:0}).animate({opacity:1}),c.hide(),l.show()},p=function(){a.removeClass("preview"),s.animate({opacity:0},function(){o(this).hide()}),l.hide(),c.show()},h=function(){var e=a.find(".header-bg");e.each(function(e,t){var a=o(t),n=a.data("ssrc"),i=a.data("swidth"),r=a.data("sheight");a.attr("src",n).css({width:i,height:r,top:0,left:0})}),p()};if(o.fn.uploadpic){var m={sel_holder:".reply-addpic",sel_form:".form-reply-uppic",sel_normal:".reply-normal",sel_error:".reply-uperror",sel_uploading:".reply-uploading",sel_uploaded:".reply-uploaded"};o("#reply-addpic-btn").uploadpic(function(e,t,a){if(e.success&&e.src){var n=e.src,i=e.width,o=e.height;f({src:n,width:i,height:o}),t.find("a.abtn-no").removeClass("abtn-no")}},m)}var g=function(e){var t=o("#crop-form"),a=(o(".people-header-right"),o(".people-header-right .header-bg")),n=a.data("src"),i=a.data("twidth"),r=a.width(),s=-parseInt(a.css("left")),l=-parseInt(a.css("top")),c=r/i,d=o.G.dtImageTrans(n,!0,712,356)+"-"+s+"_"+l+"_"+c;t.find("input").val(d),t.mySubmit({success:e})};o(".preview .people-header-right").moveable({target:".people-header .header-bg"});var v,b=o(".people-header .header-bg"),w=(o(".people-header-left"),o(".people-header-right")),y=(o(".people-header-left .header-bg"),o(".people-header-right .header-bg")),k=".preview-slider a",x=!1,C=-10,_=o(".preview-slider").width()-10,P=function(){var e=+o(k).css("left").slice(0,-2),t=(e+10)/o(".preview-slider").width()+1,a=t*(y.data("width")||d),n=t*(y.data("height")||u),i=b.position().left,r=b.position().top,s=b.last().css("margin-left"),l="auto"===s?0:s.slice(0,-2),c=(b.width()-a)/2+i,f=(b.height()-n)/2+r,p=w.width()-a-l,h=+l,m=w.height()-n,g=0;p>c?c=p:c>h&&(c=h),m>f?f=m:f>g&&(f=g),b.css({width:a,height:n,top:f,left:c})};if(t.on("dragstart",function(e){return!1}),t.on("mousedown",k,function(e){x=!0,v=e.pageX}),t.on("mouseup",function(e){x=!1}),t.on("mousemove",function(e){if(x){e.preventDefault();var t=o(k),a=e.pageX-v,n=+t.css("left").slice(0,-2)+a;n>=C&&_>=n&&(t.css({left:n}),P()),v=e.pageX}}),t.on("click",".preview-slider",function(e){"A"!==e.target.nodeName&&(e.preventDefault(),o(k).stop(),o(k).animate({left:(void 0===e.offsetX?e.pageX-o(this).offset().left:e.offsetX)-10},{duration:200,step:function(){P()}}))}),t.on("click",".preview-min",function(){o(k).stop(),o(k).animate({left:C},{duration:200,step:function(){P()}})}),t.on("click",".preview-max",function(){o(k).stop(),o(k).animate({left:_},{duration:200,step:function(){P()}})}),t.on("click",".preview-ok",function(e){var t=function(e){p()};g(t)}),t.on("click",".preview-cancel",function(e){h()}),o.G.isSTAFF()){var S=function(e,t){var a=o.isPlainObject(e)?e:o.parseJSON(e);a&&(a.success||1==a.status?r.PopOut.alert('<div class="prompt prompt-success"><h3>'+t+"</h3></div>"):r.PopOut.alert('<div class="prompt prompt-fail"><h3>'+mergeServerMessage(a.message)+"</h3></div>"),o({}).delay(1e3).queue(function(){r.PopOut.closeMask()}))};o("#resetpshead").confirm(function(e){var t=o(this).data("confirm");o.post(t,function(e){S(e,"成功重置ta的主页头图！")})},{tipword:"确定要重置ta的头图？"}),o("#cleanallblogs").confirm(function(e){var t=o(this).data("confirm");o.get(t,function(e){S(e,"成功删除ta的所有分享！")})},{tipword:"确定要删除ta的所有分享？"}),o("#cleanallreposts").confirm(function(e){var t=o(this).data("confirm");o.get(t,function(e){S(e,"成功删除ta的所有收集！")})},{tipword:"确定要删除ta的所有收集？"}),o("#bindallblogs").confirm(function(e){var t=o(this).data("confirm");o.get(t,function(e){S(e,"成功屏蔽ta的所有分享！")})},{tipword:"确定要屏蔽ta的所有分享？"}),o("#cleanallalbums").confirm(function(e){var t=o(this).data("confirm");o.get(t,function(e){S(e,"成功删除ta的所有专辑！")})},{tipword:"确定要清除ta的所有专辑？"});var T="确定要解封？";"封账号"==o("#disablethis").text()&&(T='确定要封账号？<div class="pguserkill"><form><div class="pb8"><input id="pguserkill-0" type="radio" value="小广告"  checked name="reason"/><label for="pguserkill-0">小广告</label> <input id="pguserkill-1" type="radio" value="色情" name="reason"/><label for="pguserkill-1">色情</label> <input id="pguserkill-2" type="radio" value="违禁信息" name="reason"/><label for="pguserkill-2">违禁信息</label> <input id="pguserkill-3" type="radio" value="政治" name="reason"/><label for="pguserkill-3">政治</label></div></form><div class="red">一旦封禁，该用户即无法登陆，慎重！</div></div>'),o("#disablethis").confirm(function(e){var t=o(this).data("confirm"),a=encodeURIComponent(o(".pguserkill input:checked").val());o.get(o.G.addParam(t,"reason",a),function(e){window.location.reload()})},{tipword:T}),o("#cleanallinfos").confirm(function(e){var t=o(this).data("confirm");o.get(t,function(e){S(e,"成功删除ta的个人资料！")})},{tipword:"确定要删除ta的个人资料？"}),o("#cleanallcomments").confirm(function(e){var t=o(this).data("confirm");o.get(t,function(e){S(e,"成功删除ta的所有评论！")})},{tipword:"确定要删除ta的所有评论？"}),o("#cleanmodcount").confirm(function(e){var t=o(this).data("confirm");o.get(t,function(e){S(e,"成功校正数据！")})},{tipword:"确定要校正数据？"}),o("#blockallalbums").confirm(function(e){var t,a=o(this),n=a.data("confirm"),i=a.data("userid");o(".stalbums .woo");t={user_id:i,type:"blocked"},o.post(n,t,function(){window.location.reload()})},{tipword:"确定要屏蔽本页所有专辑？"}),o("#inoutpass").confirm(function(e){var t=o(this).data("confirm");o.get(t,function(e){S(e,o(this).text())})},{tipword:o("#inoutpass").text()})}})},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,a){var n;(function(i){!function(i,o){n=function(){return i.DtTools=o()}.call(t,a,t,e),!(void 0!==n&&(e.exports=n))}(this||i,function(){var e={};return e.VERSION="0.0.1",e.dtImageTrans=function(e,t,a,n,i){var o=/https/gi,r=/(buy|www|operate|m|buy\-beta1|www\-beta1|operate\-beta1|m\-beta1).duitang.com/gi,s=window.location.href;o.test(e)||r.test(s)||console.log("非https图片请求，请修改:"+e);var l=e.trim().replace(/^http(s)?:\/\//gi,""),c=l.split("/");c[0],c[1];return t?(a=a||0,n=n||0,i=i?"_"+i:"",this.dtImageTrans(e).replace(/(\.[a-z_]+)$/gi,".thumb."+a+"_"+n+i+"$1")):e.replace(/(?:\.thumb\.\w+|\.[a-z]+!\w+)(\.[a-z_]+)$/gi,"$1")},e.dtUriTrans=function(e,t){if(void 0==t)return e;var a=[];for(var n in t){var i=n+"="+t[n];a.push(i)}var o=a.join("&"),r=e+"?"+o||"";return r},e.getParams=function(e){e||(e=window.location.href);var t,a,n,i={};e=e.split("#")[0];for(var o=e.indexOf("?"),r=o>-1?e.substr(o+1):"",s=r.split("&"),n=0;n<s.length;n++){var l=s[n].indexOf("=");if(l>0){t=s[n].substring(0,l),a=s[n].substr(l+1);try{a.indexOf("+")>-1&&(a=a.replace(/\+/g," ")),i[t]=decodeURIComponent(a)}catch(c){}}}return i},e.addParam=function(e,t,a){var n=new RegExp("([&\\?])"+t+"=[^& ]*","g");e=e.replace(n,function(e,t){return"?"==t?"?":""});var i=e.indexOf("?");return e+=(i>-1?i+1!=e.length?"&":"":"?")+t+"="+a},e.getCookie=function(e){if(document.cookie.length>0){var t=document.cookie.indexOf(e+"=");if(-1!=t){t=t+e.length+1;var a=document.cookie.indexOf(";",t);return-1==a&&(a=document.cookie.length),unescape(document.cookie.substring(t,a))}}return""},e.setCookie=function(e,t,a,n,i){var o=new Date,i=i?i.toGMTString():i;o.setDate(o.getDate()+i),document.cookie=e+"="+escape(t)+(null==a?";domain="+document.domain:";domain="+a)+(null==n?";path=/":";path="+n)+(null==i?";expires="+o.toGMTString():";expires="+i)},e.removeCookie=function(e,t,a){var n=new Date;this.setCookie(e,"",null==t?document.domain:t,null==a?"/":a,n)},e})}).call(t,function(){return this}())},function(e,t,a){(function(t){a(36),a(37),a(1),a(15),a(44),a(45),a(46);var n=a(48),i=function(){function e(e,i,o,r,s,l,c){var d=function(e){if(e&&0!==e.length){var t,a=e.parents(".nav-wrap");if(a.length&&(t=a.find(".nav-bottom-span"),t.length)){var n=e.width(),i=e.position().left,o=t.width();t.position().left;0===o?t.hide().css({left:i,width:n}).fadeIn(300):(t.stop(),t.animate({left:i,width:n,opacity:1},300))}}},u=(t("#woo-holder"),t.browser.msie);u&&"6.0"===t.browser.version;!l&&t('<a id="gotonext" href="javascript:;" style="visibility:hidden"></a><a href="#" id="retotop"></a><a id="gotopre" href="javascript:;"></a>').sidepop({id:"side-retotop",dockSide:"right",width:82,scroll:2,departure:0,baseline:"bottom",bias:16,isFixed:!0,zIndex:100,btnset:0});var f=t("#onlyproduct-a");f.length&&t.G.bindChecks("#onlyproduct-a","#woo-form-hot,#woo-form-new",void 0,function(){var e=t(".woo-swa"),a=t.Woo.pagine,n=e.index(e.filter(".woo-cur"));return a[n]&&!a[n].loading&&!a[n].lazyAdding},function(){var e=t(".woo-swa"),a=t.Woo.pagine,n=e.index(e.filter(".woo-cur")),i=f.hasClass("onlyproduct-0");!a[n]||a[n].loading||a[n].lazyAdding||(a[n].refreshPage(1),i?f.removeClass("onlyproduct-0 onlyproduct-0-no").addClass("onlyproduct-1 onlyproduct-1-no"):f.removeClass("onlyproduct-1 onlyproduct-1-no").addClass("onlyproduct-0 onlyproduct-0-no"))});var p={unitsnum:24,subpagenum:5,appendnum:12,anchordiff:80,arrform:e||["hot","new"],arrsplit:i||"",arrmasnw:o||245,arrmargin:r||21,arrfmasnw:s||0,arrgap:0,gopre:"#gotopre",gonext:"#gotonext",gotop:"#retotop",footer:"#footer,#dt-woomore",anchordiff:70,onScroll:function(e){var a=window.sessionStorage.getItem("hasPop");"false"===a&&!t.G.getUSERID()&&("undefined"==typeof ALREADYNOTICED||!ALREADYNOTICED)&&e>=1e3&&window.location.pathname.match(/^\/(category|topics|album|shopping|blogs)/gi)&&(ALREADYNOTICED=!0,SUGAR.PopOut.login())},onLazyAddOver:function(e,a){if(!e.loading){var n=t("#onlyproduct-a,#onlyproduct-set a");n.removeClass("onlyproduct-0-no onlyproduct-1-no")}},onTabSwitch:function(e,a,n,i,o){e.parent().removeClass("dymswitch-"+i+" dymswitch-"+i+"to"+n).addClass("dymswitch-"+n),d(t(".woo-swa").eq(n))},requestAlways:function(e,a){if(!e.lazyAdding){var n=t("#onlyproduct-a,#onlyproduct-set a");n.removeClass("onlyproduct-0-no onlyproduct-1-no")}},resize:!0};p=t.extend(p,c),t.Woo(p);var h=t(".woo-swa");h.hover(function(e){var a=t(this);if(!a.hasClass("woo-cur")){var n=h.index(a),i=a.parent(),o=i.attr("class").replace(/dymswitch-\d+\b/gi,function(e){return e+"to"+n});i.attr("class",o)}},function(e){var a=t(this);if(!a.hasClass("woo-cur")){var n=(h.index(a),a.parent()),i=n.attr("class").replace(/(dymswitch-\d+)to\d+\b/gi,function(e,t){return t});n.attr("class",i)}}),t.isFunction(n)&&n(),a()}function a(){if(t.G.isSTAFF()&&t.fn.confirm){var e=t("#woo-holder");e.confirm(function(e){var a=t(this),n=a.data("confirm");t.post(n,function(){a.closest("div.woo").fadeOut(150,function(){t(this).remove()})})},"a.mblogdelete",{tipword:"确定要删除？"}),e.confirm(function(e){var a=t(this),n=a.data("confirm");t.post(n,function(){a.closest("div.woo").fadeOut(150,function(){t(this).remove()})})},"a.mblogdeleteall",{tipword:"确定要删除all？"}),e.on("click",".mblogpass",function(e){var a=t(this),n=a.data("confirm");t.post(n,function(){a.closest("div.woo").fadeOut(150,function(){t(this).remove()})})}),e.on("click","a.mblogblackall",function(e){e.preventDefault(),e.stopPropagation();var a=t(this),n=a.data("confirm");a.hasClass("normal-no")||(a.addClass("normal-no").css("opacity","0.5"),t.post(n,function(){var e=a.data("confirm");a.removeClass("mblogblackall normal-no").addClass("mblogunblackall").css("opacity","1").html("解屏").data("confirm",e.replace("/block_photo/","/unblock_photo/")).closest("div.woo").css("opacity","0.1")}))}),e.on("click","a.mblogunblackall",function(e){e.preventDefault(),e.stopPropagation();var a=t(this),n=a.data("confirm");if(!a.hasClass("normal-no")){var i=t.G.getParams(n).id;t.ajax({url:n,data:{id:i,safe:0},timeout:2e4,success:function(e){var t=a.data("confirm");a.removeClass("mblogunblackall normal-no").addClass("mblogblackall").css("opacity","1").html("屏蔽").data("confirm",t.replace("/unblock_photo/","/block_photo/")).closest("div.woo").css("opacity","1")}}),a.addClass("normal-no").css("opacity","0.5")}}),e.on("click","a.mbloggood",function(e){e.preventDefault(),e.stopPropagation();var a=t(this),n=(a.html(),a.data("confirm"));a.hasClass("normal-no")||(a.addClass("normal-no").css("opacity","0.5"),t.post(n,function(){var e=a.data("confirm");a.removeClass("mbloggood normal-no").addClass("mblogungood").css("opacity","1").html("去精").data("confirm",e.replace("?opt=on","?opt=off")).closest("div.woo").css("opacity","0.1")}))}),e.on("click","a.mblogungood",function(e){e.preventDefault(),e.stopPropagation();var a=t(this),n=(a.html(),a.data("confirm"));a.hasClass("normal-no")||(a.addClass("normal-no").css("opacity","0.5"),t.post(n,function(){var e=a.data("confirm");a.removeClass("mblogungood normal-no").addClass("mbloggood").css("opacity","1").html("精").data("confirm",e.replace("?opt=off","?opt=on")).closest("div.woo").css("opacity","1")}))})}}return{wooInit:e,wooStaff:a}}();e.exports=i}).call(t,a(1))},function(e,t,a){var n=a(1);n(function(){var e=document.referrer,t=window.location.search,a=!0,i="";t.replace(/[\?\&]spm=([^& ]+)/g,function(e,t){return i=t,""}),!i&&a&&n.G.isFromDomain(e,"duitang.com")&&e.indexOf(".duitang.com/album/")>-1&&e.replace(/[\?\&]spm=([^& ]+)/g,function(e,t){return i=t,""}),n(document).delegate("a","mousedown",function(){var e=n(this).attr("href"),t="",a=n.G.isRedirect(e);if(a){i||(t=n(this).closest(".woo-pcont").data("spm"),t||(t=n(this).closest("#woo-holder").data("spm")),t||(t=n(this).closest(".spm-holder").data("spm")),t&&(t=t.replace("spm=",""),i=t));var o="";e.replace(/[\?\&]to=([^& ]+)/g,function(e,t){o=decodeURIComponent(t)}),(n.G.isFromDomain(o,"yihaodian.com")||n.G.isFromDomain(o,"1mall.com"))&&(o=n.G.addParam(o,"tracker_u","107031367"),n(this).attr("href",n.G.addParam(e,"to",encodeURIComponent(o)))),i&&n.G.isFromDomain(o,"taobao.com","tmall.com")&&n(this).attr("href",n.G.addParam(e,"spm",i))}})})},function(e,t,a){var n=a(38),i=a(39),o=a(34);a(40),a(43);var r=a(33),s=a(1),l=function(e){function t(e){return s("<div>").text(e).html()}function a(e){var t=s.trim(e),a=t.substr(0,1);if("{"!=a&&"["!=a){if("<!doctype"===t.substr(0,9))return[[],!0];u&&(t=t.replace(/(<img[^>]* class=[\'\"]?i[\'\"]?[^>\"\']*)src/gi,function(e,t){return t+"srcd"}));var n=s(t).filter(".woo"),i="False"===n.attr("hasnext")?!1:!0;return[n.toArray(),i]}return null}if(e){var l=navigator.userAgent.toString().toLowerCase(),c=!!l.match(/ipad/gi),d=s.G.getParams(window.location.search).from_blog,u=!c,f=[],p=[],h=[],m=[];h=['<% for (var i = 0; i < list.length; i ++) { %><% var u = list[i],aidx = $unit(u.id,u),plnk = $pricelnk(u,pgsource),imgsize=[224,0],newiht=$trans(224,u.iwd,u.iht); %><% if(!aidx) continue; %><div class="woo" data-id="<%=u.id%>"><div class="j"> 	  <div class="mbpho" <% if( !imgsize[1] ){ %>style="height:<%=newiht > 800 ? 800 : newiht%>px;"<% }else{ %>style="height:<%=imgsize[1]%>px"<% } %> ><a target="_blank" <% if( u.ourl ){ %>class="a"  href="<%=u.ourl%>"<% }else if( coupon && plnk ){ %>class="a" <% if(u.tid){ %> biz-itemid="<%=u.tid%>" data-type="0" data-rd="1" <% } %> href="<%=plnk%>"<% }else{ %>class="a"  href="/blog/?id=<%=u.id%>"<% } %>><img <%=srcd ? "srcd" : "src"%>="<%=$imgsrc(u.isrc,imgsize)%>" data-rootid="<%=u.rid%>" data-iid="<%=u.photo_id%>" height="<%=newiht%>"/><u <%= newiht > 800 ? "class=\'bottomfade\'" : ""%> style=\'margin-top:-<%=newiht%>px;height:<%= newiht > 800 ? 798 : (newiht-2)%>px;\'></u></a> 	    <div class="collbtn" data-favorite=\'{"id":"<%=u.id%>","owner":"<%=u.uid%>","type":"1"}\'><a <% if( ruid == u.uid ){ %>class="y re-done" title="去看我的收集" href="/blog/?id=<%=u.id%>" target="_blank"><i class="y-done"></i><em>已收集 <% }else if( ruid == u.ruid ){ %>class="y re-done" title="去看我的收集" href="/blog/?id=<%=u.rid%>" target="_blank" ><i class="y-done"></i><em>已收集 <% }else{ %>class="y" href="#" ><i></i><em>收集 <% } %><% if(u.favc > 0) {%><%=u.favc%><% } %></em></a><a class="x btn-white" href="#"><i><%=u.repc%></i></a><a <% if( ruid == u.ruid || ruid == u.uid ){ %>class="z re-zan btn-white" href="/blog/?id=<%=u.id%>"><i class="z-done"><% }else{ %>class="z btn-white" href="#" ><i><% } %><%=u.zanc%></i></a></div> 	  </div> 	  <div class="wooscr"> 	  <div class="g"<% if (u.wait_audit) {%> style="background-color:#f14382"<% } %>><%=$content(u.msg)%></div> 	  <div class="d"><span <% if( u.favc > 0 ){ %>class="d1"><% }else{ %>class="d1 dn"><% } %><%=u.favc%></span><span <% if( u.zanc > 0 ){ %>class="d2"><% }else{ %>class="d2 dn"><% } %><%=u.zanc%></span><span <% if( u.repc > 0 ){ %>class="d3"><% }else{ %>class="d3 dn"><% } %><%=u.repc%></span><% if(!coupon && plnk){ %>&nbsp;<%=$price(u,plnk)%><% } %></div> 	<% if( coupon && plnk ){ %> 	  <%=$coupon(u,plnk)%> 	<% } %> 	  <ul> 	<% if( nopth ){ %> 	  <li class="f"></li> 	<% }else{ %> 	  <li class="f"><a target="_blank" href="/people/?user_id=<%=u.uid%>"><img width="24" height="24" src="<%=u.ava%>"></a><p><a class="p" target="_blank" href="/people/?user_id=<%=u.uid%>"<% if (u.sender_wait_audit) {%> style="color:#f14382"<% } %>><%=$cut(u.unm,16)%></a>&nbsp;<br/><span><%= u.uid == u.ruid ? "发布" : "收集" %>到&nbsp;<% if(u.albid){ %><a target="_blank" href="/album/?id=<%=u.albid%>"<% if (u.album_wait_audit) {%> style="color:#f14382"<% } %>><%=$cut(u.albnm,12)%></span></a><% }else{ %><a target="_blank" href="/album/people/<%=u.uid%>/">默认专辑</a><% } %></p></li> 	<% } %> 	<% for(var j=0,l=hasrp?u.cmts.length:0; j<l; j++){ %> 	  <li><a target="_blank" href="/people/?user_id=<%=u.cmts[j].id%>"><img width="24" height="24" src="<%=u.cmts[j].ava%>"></a><p><a target="_blank" href="/people/?user_id=<%=u.cmts[j].id%>"><% if( ruid == u.cmts[j].id ){ %>我<% }else{ %><%=$cut(u.cmts[j].name,16)%><% } %></a><br/><span><%=$content(u.cmts[j].cont)%></span></p></li> 	<% } %></ul></div>'+(s.G.isSTAFF()?'<div class="clr staf"><% if(u.is_robot){ %><span class="red mr8">机器人</span><% } %><% if(u.srclnk){ %><span class="red mr8">来源</span><% } %><% if(u.sta == 7){ %><a href="javascript:;" data-confirm="/operate/audit/unblock_blog/?id=<%=u.id%>" class="mblogpass">PASS</a><a href="javascript:;" data-confirm="/operate/audit/block_photo/?id=<%=u.id%>" class="mblogblackall">屏蔽all</a><% }else if( u.sta == 6 ){ %><a href="javascript:;" data-confirm="/operate/audit/unblock_photo/?id=<%=u.id%>" class="mblogunblackall">解屏all</a><% }else{ %><a href="javascript:;" data-confirm="/operate/audit/block_photo/?id=<%=u.id%>" class="mblogblackall">屏蔽all</a><% } %><% if( u.good ){ %><a href="javascript:;" data-confirm="/blog/switchshopping/<%=u.rid%>/?opt=off" class="mblogungood">去精</a><% }else{ %><a href="javascript:;" data-confirm="/blog/switchshopping/<%=u.rid%>/?opt=on" class="mbloggood">精</a><% } %></div>':"")+"</div></div><% } %>",null,null,null,s(n).closest("#mod1").html(),s(n).closest("#mod2").html(),s(n).closest("#mod3").html(),s(n).closest("#mod4").html(),s(n).closest("#mod5").html()],p=[function(e){if(e&&e.length&&s.isPlainObject(e[0])){var t=s.G.getUSERID(),a=m[0],n={list:e,srcd:u,ruid:t,picsize:"224",coupon:a.coupon,hasrp:a.hasrp,nopth:a.nopth,pgsource:a.pgsource},o=i.compile(h[0],{escape:!0}),r=s.trim(o(n));return r}return e},null,null,null,function(e){if(e&&e.length&&s.isPlainObject(e[0])){var t=s.G.getUSERID(),a=m[0],n={isSTAFF:s.G.isSTAFF(),list:e,srcd:u,ruid:t,picsize:"224",coupon:a.coupon,hasrp:a.hasrp,pgsource:a.pgsource},i=r.compile(h[4]),o=s.trim(i(n));return o}return e},function(e){if(e&&e.length&&s.isPlainObject(e[0])){var t={list:e},a=r.compile(h[5]),n=s.trim(a(t));return n}return e},function(e){if(e&&e.length&&s.isPlainObject(e[0])){var t={list:e},a=r.compile(h[6]),n=s.trim(a(t));return n}return e},function(e){if(e&&e.length&&s.isPlainObject(e[0])){var t={list:e},a=r.compile(h[7]),n=s.trim(a(t));return n}return e},function(e){if(e&&e.length&&s.isPlainObject(e[0])){var t={list:e},a=r.compile(h[8]),n=s.trim(a(t));return n}return e}],f=[function(e){var t=a(e);if(t)return t;var n=[[],!0],i=s.isPlainObject(e)?e:s.parseJSON(e);if(!i)return n;if(i.success){var o=(s.G.getUSERID(),i.data);m[0]={picsize:"224",coupon:!!o.coupon,hasrp:!!o.hasrp,nopth:!!o.nopth,pgsource:o.pgsource},n=[o.blogs,o.has_next,o.count]}return n},function(e){var n=a(e);if(n)return n;var i=[[],!0],r=s.isPlainObject(e)?e:s.parseJSON(e);if(!r)return i;if(r.success){for(var l=s(null),c=r.data,d=0,f=c.albums,p=f.length;p>d;d++){var h=f[d].username||"",m=f[d].wait_audit?"ohblocked":"ohnoblocked",g=f[d].wait_audit?"解屏":"屏蔽",v=['<div class="woo" data-id="',f[d].id,'" data-ht="328" '+(0==d?'hasnext="'+(c.has_next?"True":"False")+'"':"")+">",'<div class="albbigimg">','<p class="lev2"></p>','<p class="lev1"></p>','<a href="/album/?id=',f[d].id,'" class="lev0" target="_blank">',function(){var e="";if(f[d].pics)for(var a=0;1>a&&a<f[d].pics.length;a++)0==a&&(e+="<img "+(u?"srcd":"src")+'="'+o.dtImageTrans(f[d].pics[a],!0,200,200,"c")+'" alt="'+f[d].name+'"/>');else e+='<img src="http://img5.duitang.com/uploads/people/201307/10/20130710134638_QtMin.jpeg" alt="'+t(f[d].name)+'" />';return e}(),"</a>",'<p class="lev3"'+(f[d].wait_audit?' style="background-color:#f00"':"")+"></p>","<div>",t(f[d].name.cut(24,"…")),"</div>","</div>","<ul>","<li>",s.G.isSTAFF()?'<a class="r blockthisalbum '+m+'" title="'+f[d].id+'" href="javascript:;" style="margin-left: 40px;">'+g+"</a>":"",f[d].user_id==s.G.getUSERID()?'<a class="r delthisalbum" title="'+f[d].id+'" href="javascript:;">删除</a>':"","<span>",f[d].count,"个收集 | ",f[d].like_count,"人喜欢</span></li>",'<li class="clr"><a href="/people/?user_id=',f[d].user_id,'" target="_blank">','<img src="',f[d].avatar,'" />',h.cut(14,"…"),"</a></li>","<li>"+t(f[d].desc)+"</li>","</ul>","</div>"].join("");l=l.add(s(v))}i=[l.toArray(),c.has_next]}return i},function(e){var t=a(e);if(t)return t;var n=[[],!0],i=s.isPlainObject(e)?e:s.parseJSON(e);if(!i)return n;if(i.success){for(var r=s(null),l=i.data,c=0,d=l.albums,f=d.length;f>c;c++){var p=d[c],h=(p.username||"",p.wait_audit?"ohblocked":"ohnoblocked"),m=p.wait_audit?"解屏":"屏蔽",g=['<div class="woo" data-id="',p.id,'" data-ht="358" '+(0==c?'hasnext="'+(l.has_next?"True":"False")+'"':"")+">",'<div class="dt-xitem-img">',function(){var e="";if(p.pics)for(var t=0;1>t&&t<p.pics.length;t++)0==t&&(e+="<img "+(u?"srcd":"src")+'="'+o.dtImageTrans(p.pics[t],!0,224,224,"c")+'" alt="'+p.name+'"/>');else e+='<img src="http://img5.duitang.com/uploads/people/201401/24/20140124115823_HJydi.png" alt="'+p.name+'" />';return e}(),'<a href="/album/?id=',p.id,'" class="dt-xitem-icv" target="_blank">',"</a>","</div>",'<div class="dt-xitem-desc">','<div class="dt-xitem-title"><a target="_blank" href="/album/?id=',p.id,'">',p.name.cut(24,"…"),"</a></div>",'<div class="dt-xitem-attr">',"<p>",function(){var e="";return e+=7==p.status?s.G.isSTAFF()?'<a class="r blockthisalbum ohblocked " title="'+d[c].id+'" href="javascript:;">PASS</a>':"":s.G.isSTAFF()?'<a class="r blockthisalbum '+h+'" title="'+d[c].id+'" href="javascript:;">'+m+"</a>":""}(),p.count,"个收集"," <b>·</b> ",p.like_count,"人喜欢","</p>",'<p class="dt-xitem-user">',"by ",'<a target="_blank" href="/people/?user_id=',p.user_id,'">',p.username,"</a>","</p>","</div>","</div>",'<div class="dt-xitem-bt1"></div>','<div class="dt-xitem-bt2"></div>',"</div>"].join("");r=r.add(s(g))}n=[r.toArray(),l.has_next]}return n},function(e){var n=a(e);if(n)return n;var i=[[],!0],r=s.isPlainObject(e)?e:s.parseJSON(e);if(!r)return i;if(r.success){for(var l=s(null),c=r.data,d=0,u=c.albums,f=u.length;f>d;d++){var p=u[d].username||"",h=u[d].is_like?'<a data-albumlike=\'{"id":'+u[d].id+'}\' class="albumlikebtn albumliked" href="javascript:;">取消喜欢</a>':'<a data-albumlike=\'{"id":'+u[d].id+'}\' class="albumlikebtn" href="javascript:;">喜欢</a>',m=u[d].desc.replace(/<br\s*\/?>/gi," ").cut(92,"…"),g=u[d].pics,v=g?g.length:0,b=['<div data-id="',u[d].id,'" data-ht="260" class="woo" '+(0==d?'hasnext="'+(c.has_next?"True":"False")+'"':"")+">",'<p class="lev1"></p><div class="albbigimg clr"><div class="dec clr"><h2><a target="_blank" href="/album/?id=',u[d].id,'" title="',u[d].name,'">',t(u[d].name.cut(20,"…")),"</a></h2><span>",u[d].count,"个收集&nbsp;|&nbsp;",u[d].like_count,'人喜欢</span></div><a target="_blank" href="/album/?id=',u[d].id,'" class="lev0">',function(){for(var e="",t=0;5>t&&v>t;t++){var a=u[d].pics[t];e+=t?'<img width="80" height="80" src="'+a+'" />':'<img width="164" height="164" src="'+o.dtImageTrans(a,!0,164,164,"c")+'" />'}return e}(),'</a><ul><li><a href="/people/?user_id=',u[d].user_id,'" class="nc"><img width="24" height="24" src="',u[d].avatar,'" />',p.cut(14,"…"),'</a></li><li class="decpro"><u>&nbsp;</u>',m,'<i>&nbsp;</i></li><li class="decfav">',h,"</li></ul></div>","</div>"].join("");l=l.add(s(b))}i=[l.toArray(),c.has_next]}return i},function(e){var t=a(e);if(t)return t;var n=[[],!0],i=s.isPlainObject(e)?e:s.parseJSON(e);if(!i)return n;if(i.success||1===i.status){var r=s.G.getUSERID(),l=i.data;m[0]={picsize:"224",coupon:!0,hasrp:!0,pgsource:"tp_"},s(l.object_list).each(function(e,t){var a=0===t.photo.width?0:Math.floor(224*t.photo.height/t.photo.width);t.newHeight=a>800?800:a,t.photo.path.indexOf(".gif_jpeg")>-1&&(t.photo.path=t.photo.path.replace(".gif_jpeg",".gif")),t.photo.path=o.dtImageTrans(t.photo.path,!0,224,0),0!==t.buyable&&""!==t.source_link&&(t.buyAbled=!0),t.isStaff=s.G.isSTAFF()?!0:!1,r===t.sender_id&&(t.isUersSelf=!0),r&&1===t.is_root&&(t.sRoot=!0)}),n=[l.object_list,!!l.more,l.total||""]}return n},function(e){var n=a(e);if(n)return n;var i=[[],!0],r=s.isPlainObject(e)?e:s.parseJSON(e);if(!r)return i;if(r.success||1===r.status){var l=r.data;s(l.object_list).each(function(e,a){a.covers&&a.covers.length>0&&(a.coverBg=o.dtImageTrans(a.covers[0],!0,200,200,"c")),a.desc&&(a.desc=t(a.desc)),a.user&&(a.user.avatar=o.dtImageTrans(a.user.avatar,!0,48,48,"c"))}),i=[l.object_list,!!l.more]}return i},function(e){var t=a(e);if(t)return t;var n=[[],!0],i=s.isPlainObject(e)?e:s.parseJSON(e);if(!i)return n;if(i.success||1===i.status){var o=s.G.getUSERID(),r=i.data;s(r.object_list).each(function(e,t){o===t.user.id&&(t.isUersSelf=!0),t.name=t.name.cut(10,"…"),t.desc=t.desc.cut(46,"…"),t.user.username=t.user.username.cut(7,"…")}),n=[r.object_list,!!r.more]}return n},function(e){var t=a(e);if(t)return t;var n=[[],!0],i=s.isPlainObject(e)?e:s.parseJSON(e);if(!i)return n;if(i.success||1===i.status){var r=(s.G.getUSERID(),i.data);s(r.object_list).each(function(e,t){t.isStaff=s.G.isSTAFF()?!0:!1,t.oClass=6==t.status?"ohblocked":"ohnoblocked",t.oText=6==t.status?"解屏":"屏蔽",t.covers=o.dtImageTrans(t.covers[0],!0,224,224,"c")}),n=[r.object_list,!!r.more]}return n},function(e){var t=a(e);if(t)return t;var n=[[],!0],i=s.isPlainObject(e)?e:s.parseJSON(e);if(!i)return n;if(i.success||1===i.status){var r=(s.G.getUSERID(),i.data);s(r.object_list).each(function(e,t){t.cover?t.cover.photo_path=o.dtImageTrans(t.cover.photo_path,!0,140,140,"c"):(t.cover={},t.cover.photo_path=o.dtImageTrans("https://a.dtstatic.com/uploads/people/201401/24/20140124115823_HJydi.png",!0,140,140,"c")),t.createTime=new Date(1e3*t.add_datetime_ts).pattern("yyyy/MM/dd")}),n=[r.object_list,!!r.more]}return n}],i.helper("$coupon",function(e,t){var a="",n=parseFloat(e.price),i=parseFloat(e.coupon_price);return n&&i&&(a='<div class="v"><a href="'+t+'" target="_blank">￥'+i+"</a><s>￥"+n+'</s><a class="q" href="'+t+'" target="_blank">查看详情</a><p>'+Math.round(i/n*100)/10+"折</p></div>"),a}),i.helper("$price",function(e,t){return e.coupon_price&&(e.price=e.coupon_price),e.buylnk?'<a class="bl '+(e.price?"":"by")+'" href="'+t+'" target="_blank"'+(e.tid?'biz-itemid="'+e.tid+'" data-type="0" data-rd="1"':"")+'><u class="_tb" title="去购买">'+(e.price?"￥"+e.price:"&nbsp;")+"</u></a>":""}),i.helper("$pricelnk",function(e,t){var a=e.prelnk||"",n=s.G.isRedirect(a);return n||(a="/dj/go2/?to="),e.buylnk&&(a=s.G.addParam(a,"to",encodeURIComponent(e.buylnk)),a=s.G.addParam(a,"mk",(t?t:"_")+"p_"+e.id)),a}),i.helper("$imgsrc",function(e,t){return e.indexOf(".gif_jpeg")>-1&&(e=e.replace(".gif_jpeg",".gif")),s.isArray(t)?o.dtImageTrans(e,!0,t[0],t[1],""):e}),i.helper("$content",function(e){var a=t(e),n=s.G.trimLink(a,s.G.isSTAFF());return n}),i.helper("$cut",function(e,t){return e.cut(t,"…")}),i.helper("$trans",function(e,t,a){return 0===t?0:Math.floor(a*e/t)}),i.helper("$unit",function(e,t){return e+="",g.addUnit(e,t,!0)});var g=function(){var e={ulen:0,latestUnits:{},init:function(t,a){e.analyzeResponse=t,e.render=a,e.masnUnits={}},reset:function(){e.ulen=0,e.masnUnits={}},getLatestUnits:function(){return e.latestUnits},resetLatestUnits:function(){e.latestUnits={}},setUnitsFromLatest:function(){var t=e.latestUnits;s.isPlainObject(t)&&(e.masnUnits=t)},addUnit:function(t,a,n){var i=e.masnUnits;return n&&i[t]||d==t?0:(e.latestUnits[t]=a,i[t]=a,e.ulen++,i[t].indx=e.ulen-1,e.ulen)}};return e}();g.init(f,p),s.Woo.WooTemp=g}}(s.Woo);e.exports=l},function(e,t){e.exports='<!-- 默认模板 该模板适用于 首页热门，最新、个人中心 发布、收集 关注动态-->\n<!-- 依赖 handerbar help的组件注入-->\n<script id="mod1" type="text/x-handlebars-template">\n  {{#each list}}\n  <div class="woo">\n    <div class="j">\n      <div class="mbpho" style="height:{{#ifCond newHeight \'>\' 800}}800{{else}}{{newHeight}}{{/ifCond}}px">\n        <a target="_blank"  class="a"  href="/blog/?id={{id}}">\n          <img src="{{photo.path}}" data-rootid="{{../ruid}}" data-iid="" height="{{newHeight}}"/>\n          <u {{#ifCond newHeight \'>\' 800}}class="bottomfade"{{/ifCond}} style="margin-top:-{{newHeight}}px;height:{{#ifCond  newHeight \'>\' 800}}800{{else}}{{math newHeight \'-\' 2}}{{/ifCond}}px">\n          </u>\n        </a>\n        <div class="collbtn" data-favorite=\'{"id":"{{id}}","owner":"{{sender_id}}","type":"1","likeid":"{{like_id}}"}\'>\n           <a {{#ifCond favorite_blog_id \'>\' 0}} class="y re-done" title="去看我的收集" href="/blog/?id={{favorite_blog_id}}" target="_blank" >\n            <i class="y-done"></i>\n            <em>已收集 {{else}} class="y" href="#" >\n            <i></i>\n            <em>收集{{/ifCond}}  {{#ifCond favorite_count \'>\' 0 }}{{favorite_count}}{{/ifCond}}</em>\n          </a>\n          <a class="x btn-white" href="#"><i>{{reply_count}}</i></a>\n          <a  {{#ifCond isUersSelf \'||\' like_id}}class="z re-zan btn-white" href="/blog/?id={{id}}">\n            <i class="z-done">\n            {{else}}\n              class="z btn-white" href="#" >\n            <i>{{/ifCond}}{{like_count}}</i>\n          </a>\n        </div>\n      </div>\n      <div class="wooscr">\n        <div class="g" {{#ifCond status \'===\' 6}}style="background-color:#f14382"{{/ifCond}}{{#if isStaff}} {{#ifCond status \'===\' 10}}style="background-color:#ff9143"{{/ifCond}}{{/if}} >{{msg}}</div>\n        <div class="d">\n          <span {{#ifCond favorite_count \'>\' 0}} class="d1">{{else}}class="d1 dn">{{/ifCond}}{{favorite_count}}</span>\n          <span {{#ifCond like_count \'>\' 0 }}class="d2">{{else}}class="d2 dn">{{/ifCond}}{{like_count}} </span>\n          <span {{#ifCond reply_count \'>\' 0 }}class="d3">{{else}}class="d3 dn">{{/ifCond}}{{reply_count}}</span>\n           {{#if buyAbled}}\n           <a class="bl {{#if item.price}}{{else}}by{{/if}}" href="{{source_link}}" target="_blank" {{#if id}} biz-itemid="{{id}}" data-type="0" data-rd="1"{{/if}}>\n            <u class="_tb" title="去购买">\n              {{#if item.price}}\n              ￥{{item.price}}\n              {{else}}\n              &nbsp;\n              {{/if}}\n            </u></a>\n           {{/if}}\n        </div>\n        <ul>\n          <li class="f">\n              <a target="_blank" href="/people/?user_id={{sender_id}}">\n              <img src="{{dtImageTrans sender.avatar true 24 24 \'c\'}}"  width="24" height="24">\n              </a>\n              <p>\n                <a class="p" target="_blank" href="/people/?user_id={{sender_id}}">\n                {{more sender.username 16}}\n                </a>&nbsp;<br/>\n                <span>\n                  {{#if isRoot}}发布{{else}}收集{{/if}}到&nbsp;\n                  {{#if album}}\n                  <a target="_blank" href="/album/?id={{album.id}}">{{album.name}}</span></a>\n                  {{else}}\n                  <a target="_blank" href="/album/people/{{sender_id}}/">默认专辑</span></a>\n                  {{/if}}\n              </p>\n            </li>\n          {{#if ../hasrp}}\n            <!--评论部分-->\n            {{#each top_comments.object_list}}\n            <li>\n                <a target="_blank" href="/people/?user_id={{sender.id}}">\n                    <img src="{{dtImageTrans sender.avatar true 24 24 \'c\'}}"  width="24" height="24">\n                </a>\n                <p>\n                    <a target="_blank" href="/people/?user_id={{sender.id}}">\n                    {{#ifCond ruid \'==\' sender.id}}\n                        我\n                    {{else}}\n                        {{more sender.username 16}}\n                    {{/ifCond}}\n                    </a><br/>\n                    <span>\n                    {{content content}}\n                    </span>\n                </p>\n            </li>\n            {{/each}}\n          {{/if}}\n        </ul>\n      </div>\n    </div>\n   </div>\n  {{/each}}\n</script>\n<!--搜索专辑模板-->\n<script id="mod2" type="text/x-handlebars-template">\n  {{#each list}}\n  <div class="woo" data-id="{{id}}" data-ht="328" \' + (i == 0 ? \'hasnext="\' + (dat.has_next ? \'True\' : \'False\') + \'"\' : \'\') + \'>\n    <div class="albbigimg">\n      <p class="lev2"></p>\n      <p class="lev1"></p>\n      <a href="/album/?id={{id}}" class="lev0" target="_blank">\n      {{#if covers}}\n        <img src="{{coverBg}}" alt="{{desc}}">\n      {{else}}\n        <img src="http://img5.duitang.com/uploads/people/201307/10/20130710134638_QtMin.jpeg" alt="{{desc}}" />\n      {{/if}}\n      </a>\n      <p class="lev3"></p>\n      <div>{{more name 24}}</div>\n    </div>\n    <ul>\n      <li><span>{{count}}张图片 | {{favorite_count}}人收藏</span></li>\n      <li class="clr"><a href="/people/?user_id={{user.id}}" target="_blank"><img src="{{user.avatar}}">{{more user.username 16}}</a></li>\n      <li>{{desc}}</li>\n    </ul>\n    <ul>\n    </div>\n  {{/each}}\n</script>\n<!--专辑标签瀑布流模板-->\n<script id="mod3" type="text/x-handlebars-template">\n{{#each list}}\n<div class="woo" data-id="{{id}}" hasnext="" data-ht="260">\n  <p class="lev1"></p>\n  <div class="albbigimg clr">\n    <div class="dec clr">\n      <h2><a href="/album/?id={{id}}" title="{{name}}">{{name}}</a></h2>\n      <span>{{count}}张图片&nbsp;|&nbsp;{{favorite_count}}人收藏</span>\n    </div>\n    <a class="lev0" href="/album/?id={{id}}" target="_blank" >\n\n    {{#each top_blogs}}\n      {{#ifCond @index \'===\' 0}}\n      <img width="164" height="164" src="{{dtImageTrans photo_url true 164 164 \'c\'}}" alt="{{name}}">\n      {{else}}\n      <img width="80" height="80" src="{{dtImageTrans photo_url true 80 80 \'c\'}}" alt="{{../name}}">\n      {{/ifCond}}\n    {{/each}}\n    </a>\n    <ul>\n      <li><a class="nc" href="/people/?user_id={{user.id}}"><img src="{{user.avatar}}" width="24" height="24"/>{{user.username}}</a></li>\n      {{#if desc}}\n      <li class="decpro"><u>&nbsp;</u>{{desc}}<i>&nbsp;</i></li>\n      {{/if}}\n      {{#ifCond isUersSelf \'!=\' true}}\n      <li class="decfav">\n        <a href="javascript:;" class="albumlikebtn{{#ifCond like_id \'!=\' 0}} albumliked{{/ifCond}}"  data-albumlike=\'{"id":"{{id}}"}\'>喜欢</a>\n      </li>\n      {{/ifCond}}\n    </ul>\n  </div>\n</div>\n{{/each}}\n</script>\n<!--peopleDetail页面瀑布流模版-->\n<script id="mod4" type="text/x-handlebars-template">\n{{#each list}}\n<div class="woo" data-id="{{id}}" data-ht="358">\n  <div class="dt-xitem-img">\n    <img alt="{{name}}" src="{{covers}}" />\n    <a href="/album/?id={{id}}" class="dt-xitem-icv" target="_blank"></a>\n  </div>\n  <div class="dt-xitem-desc">\n    <div class="dt-xitem-title">\n     <a target="_blank" href="/album/?id={{id}}">{{more name 24}}</a>\n    </div>\n    <div class="dt-xitem-attr">\n     <p>\n      {{#if isStaff}}\n        {{#ifCond status \'===\' 7}}\n          <a class="r blockthisalbum ohblocked " title="{{id}}" href="javascript:;">PASS</a>\n        {{else}}\n          <a class="r blockthisalbum {{oClass}}" title="{{id}}" href="javascript:;">{{oText}}</a>\n        {{/ifCond}}\n      {{/if}}\n      {{count}}张图片 <b>&middot;</b> {{favorite_count}}人收藏\n     </p>\n     <p class="dt-xitem-user">by <a target="_blank" href="/people/?user_id={{user.id}}">{{user.username}}</a></p>\n    </div>\n  </div>\n  <div class="dt-xitem-bt1"></div>\n  <div class="dt-xitem-bt2"></div>\n</div>\n{{/each}}\n</script>\n<!--peopleDetail页面文章瀑布流模板-->\n<script id="mod5" type="text/x-handlebars-template">\n{{#each list}}\n<div class="woo" data-id="{{id}}">\n  <a class="article" href="/article/?id={{id}}" target="_blank">\n    <div class="article-content clr">\n      <div class="article-info">\n        <h3 class="article-title">{{title}}</h3>\n        <p class="article-txt">\n        {{content content}}\n        </p>\n      </div>\n      <div class="article-cover">\n        <img src="{{cover.photo_path}}">\n      </div>\n    </div>\n    <div class="article-footer">\n      <span>{{createTime}}</span>\n      <span class="r visit-count">{{visit_count}}</span>\n    </div>\n  </a>\n</div>\n{{/each}}\n</script>';
},function(e,t){var a=function(e,t){return a["object"==typeof t?"render":"compile"].apply(a,arguments)};!function(e,t){"use strict";e.version="1.4.0",e.openTag="<%",e.closeTag="%>",e.parser=null,e.render=function(e,t){var a=d(e);return void 0===a?u({id:e,name:"Render Error",message:"Not Cache"}):a(t)},e.compile=function(t,n){function i(a){try{return new r(a).template}catch(i){return o?(i.id=t||n,i.name="Render Error",i.source=n,u(i)):e.compile(t,n,!0)(a)}}var o=arguments[2];"string"!=typeof n&&(o=n,n=t,t=null);try{var r=c(n,o)}catch(s){return s.id=t||n,s.name="Syntax Error",u(s)}return i.prototype=r.prototype,i.toString=function(){return r.toString()},t&&(a[t]=i),i},e.helper=function(e,t){l[e]=t};var a={},n="".trim,i=n&&!t.document,o={},r=function(){var e=Array.prototype.forEach||function(e,t){for(var a=this.length>>>0,n=0;a>n;n++)n in this&&e.call(t,this[n],n,this)};return function(t,a){e.call(t,a)}}(),s=Object.create||function(e){function t(){}return t.prototype=e,new t},l=e.prototype={$forEach:r,$render:e.render,$getValue:function(e){return void 0===e?"":e}};r("break,case,catch,continue,debugger,default,delete,do,else,false,finally,for,function,if,in,instanceof,new,null,return,switch,this,throw,true,try,typeof,var,void,while,with,abstract,boolean,byte,char,class,const,double,enum,export,extends,final,float,goto,implements,import,int,interface,long,native,package,private,protected,public,short,static,super,synchronized,throws,transient,volatile,arguments,let,yield".split(","),function(e){o[e]=!0});var c=function(t,a){function i(e){return v+=e.split(/\n/).length-1,e=e.replace(/('|"|\\)/g,"\\$1").replace(/\r/g,"\\r").replace(/\n/g,"\\n"),e=y[1]+"'"+e+"'"+y[2],e+"\n"}function c(e){var t=v;return h?e=h(e):a&&(e=e.replace(/\n/g,function(){return v++,"$line="+v+";"})),0===e.indexOf("=")&&(e=e.substring(1).replace(/[\s;]*$/,""),n&&(e="$getValue("+e+")"),e=y[1]+e+y[2]),a&&(e="$line="+t+";"+e),d(e),e+"\n"}function d(e){e=e.replace(/\/\*.*?\*\/|'[^']*'|"[^"]*"|\.[\$\w]+/g,""),r(e.split(/[^\$\w\d]+/),function(e){if(/^this$/.test(e))throw{message:'Prohibit the use of the "'+e+'"'};!e||o.hasOwnProperty(e)||/^\d/.test(e)||b.hasOwnProperty(e)||(u(e),b[e]=!0)})}function u(e){var t;t="print"===e?x:"include"===e?C:l.hasOwnProperty(e)?"$helpers."+e:"$data."+e,w+=e+"="+t+","}var f=e.openTag,p=e.closeTag,h=e.parser,m=t,g="",v=1,b={$out:!0,$line:!0},w="var $helpers=this,"+(a?"$line=0,":""),y=n?["$out='';","$out+=",";","$out"]:["$out=[];","$out.push(",");","$out.join('')"],k=n?"if(content!==undefined){$out+=content;return content}":"$out.push(content);",x="function(content){"+k+"}",C="function(id,data){if(data===undefined){data=$data}var content=$helpers.$render(id,data);"+k+"}";r(m.split(f),function(e,t){e=e.split(p);var a=e[0],n=e[1];1===e.length?g+=i(a):(g+=c(a),n&&(g+=i(n)))}),m=g,a&&(m="try{"+m+"}catch(e){e.line=$line;throw e}"),m=w+y[0]+m+"this.template="+y[3];try{var _=new Function("$data",m),P=_.prototype=s(l);return P.toString=function(){return this.template},_}catch(S){throw S.temp="function anonymous($data) {"+m+"}",S}},d=function(t){var n=a[t];if(void 0===n&&!i){var o=document.getElementById(t);return o&&e.compile(t,o.value||o.innerHTML),a[t]}return a.hasOwnProperty(t)?n:void 0},u=function(e){function a(){return a+""}var n="[template]:\n"+e.id+"\n\n[name]:\n"+e.name;return e.message&&(n+="\n\n[message]:\n"+e.message),e.line&&(n+="\n\n[line]:\n"+e.line,n+="\n\n[source]:\n"+e.source.split(/\n/)[e.line-1].replace(/^[\s\t]+/,"")),e.temp&&(n+="\n\n[temp]:\n"+e.temp),t.console&&console.error(n),a.toString=function(){return"{Template Error}"},a}}(a,this),"undefined"!=typeof e&&e.exports&&(e.exports=a)},function(e,t,a){(function(e){var t=a(1);a(41),function(a,n){var i,o,r,s,l,c,d,u=(a.location,t(a)),f=t.History,p=0,h=!1,m=!1,g=!1,v=!1,b=!1,w=[],y=[],k=function(e){k.init(e)};t.extend(k,{dfConf:{formprefix:"#woo-form-",frame:["#woo-holder",".woo-swa",".woo-swb",".woo-pcont",".woo-pager",".woo-masned"],gopre:null,gonext:null,gotop:null,footer:null,unit:".woo",anchor:"woo-anchor",anchordiff:70,sink:t(null),sinkheight:0,sinkright:!1,unitsnum:24,subpagenum:4,scrollwait:100,lbias:400,appendnum:12,batchopen:!1,batchdelay:6,batchnum:2,nearbypagenum:3,ajaxdatatype:"text",ajaxcache:!1,resize:!1,refreshwhenswitch:!1,exrecycle:!1,exrecycletop:.5,exrecyclebot:1,onScroll:function(e){},onFirstArrange:function(e){},onOnePageOver:function(e,t){},onLazyAddOver:function(e,t){},onTabSwitch:function(e,t,a,n,i){},beforeImageLoad:function(e){return e},requestAlways:function(e,t){}},init:function(e){if("string"==typeof e.arrsplit){var a=e.arrsplit;e.arrsplit=[]}if("number"==typeof e.arrmasnw){var n=e.arrmasnw;e.arrmasnw=[]}if("number"==typeof e.arrmessw){var o=e.arrmessw;e.arrmessw=[]}if("number"==typeof e.arrmargin){var r=e.arrmargin;e.arrmargin=[]}if("number"==typeof e.arrfmasnw){var s=e.arrfmasnw;e.arrfmasnw=[]}if("number"==typeof e.arrgap){var l=e.arrgap;e.arrgap=[]}for(var p=0;p<e.arrform.length;p++)a!==h&&e.arrsplit.push(a),n!==h&&e.arrmasnw.push(n),o!==h&&e.arrmessw.push(o),r!==h&&e.arrmargin.push(r),s!==h&&e.arrfmasnw.push(s),l!==h&&e.arrgap.push(l);k._varClean(),this.conf=t.extend({},this.dfConf,e);var h,e=this.conf,g=e.frame,v=t(g[1]),b=t(g[2]);this.$holder=c=t(g[0]),c.length&&v.length&&b.length&&(this.$conts=b,this.$gonext=t(e.gonext),this.$gopre=t(e.gopre),this.$gotop=t(e.gotop),this.$footer=t(e.footer),d=k.WooTemp,i=u.height(),(f&&!f.getHash()||!f)&&k._switch(v,b),f&&f.bind(function(e){m?m=!1:k._switch(v,b);var t=e.split("-p"),a=parseInt(t[1])||1;a>1?k.$gopre.css("display","block"):k.$gopre.css("display","none")}),this.setClickGoPre(),this.setClickGoNext(),this.setClickGoTop(),u.unbind("scroll.woo").bind("scroll.woo",k._winScroll),u.unbind("resize.woo").bind("resize",k._winResize))},_varClean:function(){h=!1,m=!1,g=!1,v=!1,w=[],y=[],k.masn=[],k.pagine=[]},_winScroll:function(){g=!0,a.clearTimeout(l),l=a.setTimeout(function(){g=!1},k.conf.scrollwait);var e=u.scrollTop();k.$gotop.css("visibility",e>100?"visible":"hidden")},_winResize:function(){k.throttle(function(){i=u.height();var e=k.conf;e.resize&&!e.exrecycle&&o!=(o=u.width())&&k.resize()},100)},$holder:t(null),masn:[],pagine:[],resetCol:function(e,t,a){var n=c.find(this.conf.frame[5]+":visible").not(".woo-tmpmasn"),i=k._getDataColY(n);if(i&&i[t]){i[t]+=e;var o=Math.max.apply(Math,i);n.data("colY",i).css({height:o}),c.find("div.co"+t).each(function(t,n){var i=parseInt(n.style.top);i>a&&(n.style.top=i+e+"px")})}},throttle:function(e,t){a.clearTimeout(k.throttle.timer),k.throttle.timer=setTimeout(function(){e.call(this)},t)},resize:function(){for(var e=0;e<y.length;e++){var t=y[e];e===p&&t?(t.setCols(),t.figure(),t.arrangeContents(!0)):t&&t.resetDomWidth()}},recurseDo:function(e,n,i,o,r){return 0==i?void(t.isFunction(r)&&r()):(n=e.apply(null,n),void(n[0].length?a.setTimeout(function(){k.recurseDo(e,n,--i,o,r)},o):t.isFunction(r)&&r()))},getFormAction:function(e){return encodeURI(e.attr("action"))},paramForm:function(e,a){var i={};return t("input,select,textarea",e).not("[type=submit]").filter("[name]").each(function(e,a){(("checkbox"===t(a).attr("type")||"radio"===t(a).attr("type"))&&t(a).prop("checked")===!0||"checkbox"!==t(a).attr("type")&&"radio"!==t(a).attr("type"))&&(i[a.name]!==n?i[a.name]+=","+a.value:i[a.name]=a.value)}),t.isPlainObject(a)&&t.extend(i,a),t.param(i)},scrollTo:function(a,n,i){if("undefined"!=typeof e)return void t("body,html").animate({scrollTop:a},n,i);var o=parseInt(document.body.scrollTop),r=0,s=10;a=parseInt(a),n/=s;var l=setInterval(function(){r++,document.body.scrollTop=(a-o)/n*r+o,document.documentElement.scrollTop=(a-o)/n*r+o,r>=n&&(t.isFunction(i)&&i(),clearInterval(l))},s)},scrollToAnchor:function(){var e=(t("body,html"),k.conf);if($tohsh=t("a[name="+e.anchor+"]"),e.anchor&&$tohsh.length){var n=$tohsh.offset().top-e.anchordiff||0;k.scrollTo(n,200)}else a.ActiveXObject&&!a.XMLHttpRequest&&k.scrollTo(n,200)},_clickGoTop:function(e){e.preventDefault(),e.stopPropagation(),v=!0;var a=this;t("body,html");k.scrollTo(0,200,function(){a.style.visibility="hidden",v=!1})},setClickGoTop:function(){k.$gotop.unbind("click.woo").bind("click.woo",k._clickGoTop)},_clickGoPre:function(e){e.preventDefault(),k._clickGo.call(this,-1)},setClickGoPre:function(){k.$gopre.unbind("click.woo").bind("click.woo",k._clickGoPre)},_clickGoNext:function(e){e.preventDefault(),k._clickGo.call(this,1)},setClickGoNext:function(){k.$gonext.unbind("click.woo").bind("click.woo",k._clickGoNext)},_clickGo:function(e){var a=k.conf;if(t(this).css("display","none"),w&&w[p]&&y&&y[p]){var n=c.find(a.frame[4]+":visible"),i=n.find(".woo-pbr").length,o=w[p]&&w[p].hasNextUpperPage,r=i&&o?!1:!0;if(i&&!o)return;w[p].isPagerClick=!0,r&&(w[p].loading=!1,w[p].lazyAdding=!0,w[p].halting=!0),w[p].slidePage(e,!0)}},_switch:function(e,a){var n=k.conf,o=n.frame,r=n.arrform;e.unbind("click.woo").tabswitch(function(e,n,o,s,l){var c=(e.eq(o),k._getPageNumFromHash());if(t.Woo.conf.onTabSwitch(e,n,o,s,l),l){if(c=w[o]&&o!=s&&!k.conf.refreshwhenswitch?w[o].getPageNum():1,h=!0,m=!0,f){var d="!"+r[o];f.setHash(d+(c>1?"-p"+c:""))}n.eq(o).find(k.conf.frame[3]).last().css("height",i)}else;w[s]&&(w[s].idata=[],w[s].$data=t(null)),k._pageInit(a,o,c)},{event:"click.woo",focus:"woo-cur",cont:o[2],index:k._getFocusIdx(e)})},_pageInit:function(e,n,i){k.idx=p=n,b=!1,a.clearTimeout(r);var o=this.conf,l=o.frame,c=o.arrform,u=o.arrsplit,f=o.arrmasnw,m=o.arrmessw,g=o.arrmargin,v=o.arrfmasnw,x=o.arrgap,C=t.isArray(u)?u[n]:"",_=e.eq(n),P=_.find(l[3]).not(".woo-tmpmasn"),S=_.find(l[4]),T=parseInt(P.data("totalunits")),$=isNaN(T),I=P.data("wootemp")||0,j=P.data("subpagenum")||o.subpagenum,A=P.data("unitsnum")||o.unitsnum,z=t(P.data("sink")?P.data("sink"):o.sink),O=P.data("sinkheight")||o.sinkheight,H=!!P.data("sinkright")||o.sinkright,D=$?2:Math.ceil(T/A),G=!!v[n],F=f[n],U=t.isArray(m)?m[n]:null,F=U?F-U:F,N=g[n],M=x[n],L=G?F+v[n]:F,R=L!=F,E=D>2?!1:!0;if(this.$footer.css("display",1==D?"block":"none"),w[n])(w[n].lazyAdding||w[n].loading)&&h||(w[n].lazyAdding=!0,w[n].scrollLoading=!0,y[n].standardUnitCount=0,y[n].setCols(),w[n].refreshPage(i));else{var W,q=t(null);this.masn[n]=y[n]=new k.Masn(P,{unit:o.unit,gap:M||0,onAppend:k._doLoadImage,onFirstArrange:o.onFirstArrange,onArrange:function(e){e.length&&(W=2,q=e),w[n]&&(w[n].caching=1,w[n].$data=e),s&&a.clearTimeout(s),k._onscroll()},initAppendCounts:A,sinkWhat:z,firstHeight:O,rightAlignFirstBlock:H,specialColumnOpen:R,firstColumnWidth:L,columnMessWidth:U,columnWidth:F,columnMargin:N,batchOpen:o.batchopen,batchDelay:o.batchdelay,batchNum:o.batchnum}),this.pagine[n]=w[n]=new k.Pagine([P,S],{identity:"!"+c[n],arrRequestUrl:[t(o.formprefix+c[n])[0],C],requestAlways:o.requestAlways,onOnePageOver:o.onOnePageOver,ajaxDataType:o.ajaxdatatype,ajaxCache:o.ajaxcache,scrollBias:o.lbias,nearbyPageNum:o.nearbypagenum,subPageNum:j,unitsPerSub:A,currentUpperPage:i,totalPageNum:D,caching:W,$data:q,nextMode:E,analyzeResponse:d?d.analyzeResponse[I]:t.noop,lazyAdd:function(e){var i=this,o=i.config;if(0===i.$data.length&&0===i.idata.length)return i.caching=0,void(i.isLastSub()&&i.showFooter());i.lazyAdding=!0,i.caching=1;var r=i.$data,s=i.idata,l=r&&r.length||0,c=s&&s.length||0,u=l+c,f=e?Math.max(u+1,o.unitsPerSub):k.conf.appendnum,h=l+c-f,m=!1;e&&y[n]&&(y[n].clearColY(),m=!0);var g,v;l>=f?(g=r.slice(0,f),i.$data=r.slice(f)):(g=r,i.$data=t(null),v=s.slice(0,f-l),i.idata=s.slice(f-l));var b=d&&d.render[I]?d.render[I](v):v;y[n].appendContents(g,b,!1,!1,m,k.conf.batchnum,function(){if(0>=h){i.caching=0;var e=i.currentPage,t=o.subPageNum;e%t===0&&i.currentPage!=i.totalPageNum&&a.setTimeout(function(){i.prepareNext()},400),i.isLastSub()&&i.showFooter()}else i.caching=h<=o.unitsPerSub?1:2,i.$pager.css({height:0,overflow:"hidden"});a.setTimeout(function(){i.lazyAdding=!1,k.conf.onLazyAddOver(i,p)},200)})}})}h=!1,k.$gonext.css("visibility","hidden")},_getIdentityFromHash:function(){var e="";return f&&(e=f.getHash(),e=e.split("-")[0]),e},_getPageNumFromHash:function(){var e=1;if(f){var t=f.getHash();t=t.split("-p")[1],t&&(e=parseInt(t)||e)}return e},_getFocusIdx:function(e){for(var a=k.conf.arrform,n=k._getIdentityFromHash().substr(1),i=-1,o=0;o<a.length;o++)if(a[o]===n){i=o;break}return-1===i&&e.each(function(e,a){t(a).hasClass("woo-cur")&&(i=e)}),i=-1===i?0:i},_onscroll:function(){var e=u.scrollTop();if(!v&&!b&&(w[p]&&w[p].hasTouchedBottom()&&(w[p].doLazyAdd(),w[p].doLoadNext()),!g&&(k.conf.onScroll(e),c.length))){var t=k.conf,n=k.$gopre,i=k.$gonext,o=c.find(t.frame[4]+":visible"),r=o.find(".woo-pbr").length,l=w[p]&&w[p].hasNextUpperPage;n.add(i).css("visibility",e>c.position().top&&(!r||r&&l)?"visible":"hidden")}if(k.conf.exrecycle&&y[p]){var d=y[p],f=y[p].$dom,h=f.position().top;d.exRecycleInvisibleUnits(e,h,1,4,-1),d.exRecycleInvisibleUnits(e,h,0,3,1)}a.clearTimeout(s),s=a.setTimeout(k._onscroll,100)},_doLoadImage:function(e){e.find("img[srcd]").each(function(e,n){var i=t(n),o=i.attr("srcd");t.isFunction(t.Woo.conf.beforeImageLoad)&&(o=t.Woo.conf.beforeImageLoad(o)),o&&i.css("display","none").one("load",function(e){t(this).css({visibility:"visible"}).fadeIn(400)}).one("error",function(){var e=t(this);a.setTimeout(function(){e.one("error",function(){e.attr("src",o)}).attr("src",o)},1e3)}).attr("src",o).removeAttr("srcd")})},_getDataColY:function(e){var t=e.data("colY");return t}}),k.Pagine=function(e,t){this.init(e,t)},k.Pagine.prototype={init:function(e,a){this.config=t.extend({},a);var n=this,i=n.config,o=i.currentUpperPage,r=i.subPageNum;n.hasNextUpperPage=!0,n.caching=i.caching,n.$data=i.$data||t(null),n.idata=[],n.$dom=e[0],n.$pager=e[1],n.unitsPerSub=i.unitsPerSub,n.totalPageNum=i.totalPageNum,n.currentUpperPage=o,n.currentPage=(o-1)*r+1,n.$loadingsm=t('<div id="woo-loading" class="woo-loading"></div>');var s=i.arrRequestUrl;"object"===t.type(s[0])&&"form"===s[0].tagName.toLowerCase()&&(n.arrurl=s),n.$dom.find(":first-child").length?o>1?(n.clearCont=!0,n.loadPage(n.currentPage,1)):n.setPager():(n.clearCont=!1,n.loadPage(n.currentPage,1))},loadPage:function(e,t,a){if(this.loading)return void(this.scrollLoading=!1);var n=this,i=n.config,o=i.subPageNum,r=t&&(e%o===1||1==o),s=!1;!t&&k.scrollToAnchor(),n.$pager.css("display","none"),n.pagerVisible=!1,n.loading=!0,n.currentUpperPage=e,o>1&&!t?e=(e-1)*o+1:o>1&&t&&(n.currentUpperPage=Math.floor((e-.1)/o)+1),t&&!r||!n.clearCont||(n.changeHashOnFirstLoad(i.identity,n.currentUpperPage),h=!0,s=!0,n.$dom.empty()),n.isPagerClick=!1,n._requestData(e,t,a,!1,s)},getPageNum:function(){return this.currentUpperPage},gotoPage:function(e){var t=this;t.clearCont=!0,t.loadPage(e,!1,!0)},refreshPage:function(e){var a=this,n=e||a.currentUpperPage;a.$data=t(null),a.idata=[],a.caching=0,a.halting=!0,a.loading=!1,a.gotoPage(n)},slidePage:function(e,t){var a=this,n=a.currentUpperPage;a.clearCont=!0,a.loadPage(n+e,!1,t)},slideSubPage:function(e){var t=this,a=t.currentPage;t.clearCont=!0,t.loadPage(a+e,1)},jumpPage:function(){var e=this,t=e.$pager.find("[type=text]").val()||0;t&&(e.clearCont=!0,e.loadPage(t))},prepareNext:function(){var e=this,t=e.currentPage;e.prepare&&e.prepare[0]===t+1||e._requestData(t+1,!0,!1,!0)},requestOver:function(e,t,a,n,i){var o=this,r=o.config,s=!o.$dom.find(":first-child").length,l=r.subPageNum,c=e%l===1;o.hasNoMore=!n,o.currentPage=e,o.caching=2,i&&(o.totalPageNum=Math.ceil(i/r.unitsPerSub)),s&&(o.loading=!0);var d=r.nextMode,u=o.currentPage,f=(o.currentUpperPage||u,o.totalPageNum),p=o.$loadingsm;o.$dom.removeClass("woo-loading"),o.isLastSub()||p.css("visibility","hidden"),d||u===f?n?o.totalPageNum=u+1:o.totalPageNum=u:d||(n?u>f&&(o.totalPageNum=u+1):o.totalPageNum=u),o.loadFromJson(a,s),(!t||c||o.isLastSub())&&o.setPager(),o.caching?o.$pager.css({display:"block",height:0,overflow:"hidden"}):o.isLastSub()&&o.$pager.css({display:"block",height:"auto"}),o.pagerVisible=!0},loadFromJson:function(e,t){var a=this,n=a.config;a.idata=a.idata.concat(e),n.lazyAdd.call(a,t)},_requestAlways:function(){var e=this,a=e.config;e.loading=!1,e.$dom.removeClass("woo-loading"),e.$loadingsm.css("visibility","hidden"),t.isFunction(a.requestAlways)&&a.requestAlways(e,p)},_beforeRequest:function(e){var n=this,i=n.$loadingsm;n.$pager.after(i),k.$footer.css("display","none"),e?(n.$dom.addClass("woo-loading"),i.css("visibility","hidden"),d&&d.reset&&d.reset(),n.idata=[],n.$data=t(null),s&&a.clearTimeout(s),k._onscroll()):i.css("visibility","visible")},_requestData:function(e,n,i,o,r){var s=this,l=s.config,c=(l.subPageNum,s.arrurl);if(c)if(!o&&s._beforeRequest(r),s.prepare&&s.prepare[0]==e)d&&d.setUnitsFromLatest&&d.setUnitsFromLatest(),s.requestOver(e,n,s.prepare[1],s.prepare[2],s.prepare[3]),s.prepare=null,a.setTimeout(function(){s._requestAlways()},50),s.scrollLoading=!1;else{var u=t(c[0]),f={};f=u.serializeObject();var p=k.getFormAction(u);p.match("^/napi/")?f.start=(e-1)*(c[1]||24):p+=e+c[1],t.ajax({type:"GET",dataType:l.ajaxDataType,cache:!!l.ajaxCache,url:p,data:f,timeout:2e4,success:function(a){if(!s.halting||i){i&&(s.halting=!1,s.$dom.empty()),d&&d.resetLatestUnits&&d.resetLatestUnits();var r=l.analyzeResponse(a);if(o){s.prepare=[e,r[0],r[1],r[2]];var c=[];t(r[0]).find("img[srcd]").each(function(e,a){var n=t(a);c.push(n.attr("srcd"))}),k.recurseDo(function(e){return(new Image).src=e.splice(0,1),[e]},[c],c.length,200)}else s.requestOver(e,n,r[0],r[1],r[2]);s.scrollLoading=!1,s._requestAlways()}},error:function(a,i){o||(t('<div id="woo-retry" style="text-align:center;padding:12px 0 0;height:28px">网络繁忙，<a href="javascript:;">点此重试~</a></div>').click(function(a){a.stopPropagation(),a.preventDefault(),s._requestData(e,n),t(this).remove(),s.$loadingsm.css("display","block")}).insertAfter(s.$dom),s.$loadingsm.css("display","none")),s._requestAlways()}})}},hasNextUpperPage:function(){var e=this;return e.hasNextUpperPage},isLastSub:function(){var e=this;return e.currentPage%e.config.subPageNum===0||e.currentPage===e.totalPageNum},showFooter:function(){var e=this;e.$pager.css({height:"auto"}),k.$footer.css("display","block"),e.$loadingsm.remove(),a.clearTimeout(r),r=a.setTimeout(function(){e.isLastSub()&&0===e.$data.length&&0===e.idata.length&&(b=!0,k.conf.exrecycle||a.clearTimeout(s))},200),e.config.onOnePageOver(e,p)},setPager:function(){var e=this,t=e.config,a=e.currentUpperPage,n=t.nearbyPageNum,i=e.totalPageNum,o=t.subPageNum,r="";i=Math.floor((i-.1)/o)+1,(t.nextMode&&a>=i||!t.nextMode&&a>=i)&&e.hasNoMore&&(e.hasNextUpperPage=!1),e.isLastSub()?(r=['<div class="woo-pbr woo-mpbr"><ul class="woo-dib">',1==a?"":'<li><a class="woo-pre" href="javascript:;" pdir="-1" >上一页</a></li>',1==a?'<li class="woo-cur">1</li>':'<li><a href="javascript:;">1</a></li>',a-n>2?'<li class="woo-ell" >…</li>':"",function(){for(var e="",t=a-n;a+n>=t;t++)t==a&&1!=t?e+='<li class="woo-cur">'+t+"</li>":t>1&&i>=t&&(e+='<li><a href="javascript:;">'+t+"</a></li>");return e}(),i-1>a+n&&!t.nextMode?'<li class="woo-ell" >…</li>':"",i>a+n&&!t.nextMode?'<li><a href="javascript:;">'+i+"</a></li>":"",a==i?"":(t.nextMode?'<li class="woo-ell" >…</li>':"")+'<li><a class="woo-nxt" href="javascript:;"  pdir="1">下一页</a></li>',"</ul></div>"].join(""),e.$pager.find(".woo-mpbr").remove(),e.$pager.append(r)):(e.$pager.find(".woo-mpbr").remove(),e.$pager.append(r)),e.addEventOnPagerClick();var s=k.$gonext;s.css("display","block"),e.$pager.find(".woo-pbr").length&&s.css("visibility",e.hasNextUpperPage?"visible":"hidden"),e.pagerVisible=!0,e.doLazyAdd()},changeHashOnFirstLoad:function(e,t){var a=this,n=e+(t>1?"-p"+t:""),i=f.getHash();(i||a.isPagerClick)&&i!==n&&f.setHash(n)},_pagerClick:function(e){var a=e.data.pager,n=e.target;if(n&&n.tagName&&"a"!=n.tagName.toLowerCase()&&(n=t(n).closest("a")[0]),a.$pager&&n&&n.tagName&&"a"===n.tagName.toLowerCase()&&!t(n).closest(".woo-nopagine",a.$pager.get(0)).length){e.preventDefault(),e.stopPropagation();var i=parseInt(n.innerHTML),o=n.getAttribute("pdir");a.isPagerClick=!0,i?a.gotoPage(i):"jump"===o?a.jumpPage():"sub"===o?a.slideSubPage(1):(o=parseInt(o))&&a.slidePage(o)}},addEventOnPagerClick:function(){var e=this;e.$pager.unbind("click.woo").bind("click.woo",{pager:e},e._pagerClick)},hasTouchedBottom:function(e){var t=this,a=t.config,e=e===n?u.scrollTop():e,o=k._getDataColY(t.$dom),r=t.$dom.offset().top+(parseInt(t.$dom.get(0).style.height)||0)-e-i,s=Math.max.apply(Math,o),l=Math.min.apply(Math,o);return r<a.scrollBias||s-l>r},doLazyAdd:function(){var e=this,t=e.config;!e.lazyAdding&&e.pagerVisible&&e.caching&&t.lazyAdd.call(e)},doLoadNext:function(){var e=this;e.config;e.lazyAdding||e.halting||e.scrollLoading||!e.pagerVisible||!(e.caching<2)&&e.caching||e.isLastSub()||(e.scrollLoading=!0,e.slideSubPage(1))}},k.Masn=function(e,t){this.init(e,t)},k.Masn.prototype={init:function(e,a){this.opts=t.extend({},a);var n=this;n.$dom=t(e),n.domInitWidth=n.$dom.data("domwidth")||"auto",n.figure(),n.arrangeContents(),n.opts.onFirstArrange(p)},figure:function(){var e=this,a=e.$dom,n=e.opts,i=t("<div>");a.css({position:"relative"}),e.colwf=e.colw=n.columnWidth,n.firstColumnWidth&&(e.colwf=n.firstColumnWidth),e.setCols(),e.clearColY(),a.prepend(i),e.offset0=i.offset(),e.domtop0=a.offset().top,e.left0=Math.round(i.position().left),i.remove(),n.firstHeight&&(e.firstWidth=e.colwf,e.firstHeight=n.firstHeight)},clearColY:function(){var e=this,t=[];if(e.unitCount=0,e.standardUnitCount=0,k.conf.exrecycle){e.arrColumnTail=[],e.posCoordination={},e.columnVisibleRange=[[],[]],e.unitCache={};for(var a=0;a<e.colCount;a++)e.columnVisibleRange[0][a]=e.columnVisibleRange[1][a]=a,t[a]=0}else for(var a=0;a<e.colCount;a++)t[a]=0;e.$dom.data("colY",t)},exIsUnitVisible:function(e,t,a,n){var o=k.conf.exrecycletop,r=k.conf.exrecyclebot,s=o>-10&&10>o?o*i:o,l=r>-10&&10>r?r*i:r,c=-1,d=t+a+n,u=t+a,f=e-s,p=e+i+l;return d>=f&&p>=u?c=0:f>d&&(c=1),c},exRecycleInvisibleUnits:function(e,t,a,i,o){for(var r,s=this,l=0,c=0,d=0;d<s.colCount;d++){for(r=s.columnVisibleRange[1&a][d],c=s.columnVisibleRange[1^a][d];l>=0&&l<s.unitCount;){l=r;var u=s.posCoordination[""+l];if(u===n)break;var f=s.exIsUnitVisible(e,t,u[0],u[1]);if(f==o)break;if(0!==f||u[5]||(s.unitCache[""+l]&&s.unitCache[""+l].appendTo(s.$dom),u[5]=1),s.columnVisibleRange[1&a][d]=l,-1==u[i]||u[i]==l)break;r=u[i]}for(;c>=0&&c<s.unitCount;){var u=s.posCoordination[""+c];if(u===n)break;var f=s.exIsUnitVisible(e,t,u[0],u[1]);if(0==f||f==o)break;if(u[5]&&(s.unitCache[""+c]&&s.unitCache[""+c].remove(),u[5]=0),-1==u[i]){s.columnVisibleRange[1&a][d]=s.columnVisibleRange[1^a][d];break}if(u[i]==c)break;c=s.columnVisibleRange[1^a][d]=u[i]}}},setContHeight:function(){var e=this,t=k._getDataColY(e.$dom);e.$dom.css({height:Math.max.apply(Math,t.concat(i-e.domtop0))}).data("colY",t)},setCols:function(){var e,t=this,a=t.opts,n=t.$dom,i=a.columnMessWidth||0,o=i?a.columnMargin:0;t.resetDomWidth(),e=t.domWidth,t.colCount=Math.max(Math.floor((e+a.columnMargin-t.colwf+t.colw-i)/t.colw),1),t.domWidth=t.colCount*t.colw+t.colwf-t.colw-a.columnMargin+i-o,n.css("width",t.domWidth)},resetDomWidth:function(){var e=this,t=e.$dom;t.css("width",e.domInitWidth),e.domWidth="auto"===e.domInitWidth?t.parent().width():e.domInitWidth},arrangeContents:function(e){var a,n,i=this,o=i.$dom,r=i.opts,s=r.initAppendCounts;if(a=o.children().filter(r.unit),n=a.length){e&&(s=n);var l=a.slice(0,s);a=a.slice(s).addClass("woo-wait"),i.appendContents(l,null,!0,e,!!r.firstHeight,s,t.noop),r.onAppend(l)}o.css("visibility","visible"),t.isFunction(r.onArrange)&&r.onArrange(a)},appendContents:function(e,a,n,i,o,r,s){var l=this,c=l.opts,d=l.$dom,r=(k._getDataColY(d),r||c.batchNum),u=l._placeEachUnit(l,c,d,e,a,n,i,o&&l.firstHeight),f=u[0],p=u[1];n?(k.conf.exrecycle&&p.each(function(e,t){var a=p.eq(e);l.unitCache[""+a.data("idx")]=a}),c.onAppend(p),l.setContHeight()):(f.appendTo(d),c.batchOpen?k.recurseDo(function(e,a){var n=0;return k.conf.exrecycle?e.each(function(i,o){var r=e.eq(i);l.unitCache[""+r.data("idx")]=r,n++,t(o).append(a.eq(i).children())}):e.each(function(e,i){n++,t(i).append(a.eq(e).children())}),c.onAppend(e),e=e.slice(r),a=a.slice(n),l.setContHeight(),[e,a]},[f,p],Math.ceil(f.length/r),c.batchDelay,function(){s()}):(k.conf.exrecycle?f.each(function(e,a){var n=f.eq(e);l.unitCache[""+n.data("idx")]=n,t(a).append(p.eq(e).children())}):f.each(function(e,a){t(a).append(p.eq(e).children())}),l.setContHeight(),c.onAppend(f),s()))},prePlaceUnit:function(e,t,a,n,i){var o,r,s,l,c,d=this,u=d.opts,f=a;for(o=Math.min.apply(Math,t);f--;)t[f]==o&&(r=f);return d.colwf!=d.colw&&(0===r&&!u.rightAlignFirstBlock||r===a-1&&u.rightAlignFirstBlock)&&(c=d.colwf,!i&&e.addClass("woo-spcol")),n&&u.specialColumnOpen&&e.removeData("ht").removeAttr("data-ht"),s=d.colw*r+d.left0+(!u.rightAlignFirstBlock&&r&&d.colwf!=d.colw?d.colwf-d.colw:0),l=i?d.firstHeight:e.data("ht")||(e.outerHeight?e.outerHeight(!0):e.height()+(parseInt(e.css("margin-top"))||0)+(parseInt(e.css("margin-bottom"))||0)),t[r]+=l+u.gap,[o,r,s,l,c]},_placeEachUnit:function(e,a,n,i,o,r,s,l){var c,d,u,f,p,h,m,g,v=n.prev(),b=!!v.length,w="",y=t(null),x=k._getDataColY(n),C=e.colCount,_=0,P=s&&l;if(!b||b&&!v.hasClass("woo-tmpmasn")){var S=k.conf.frame,T=("."==S[3].indexOf(0)?S[3].substr(1):"")+" "+("."==S[5].indexOf(0)?S[5].substr(1):"")+" woo-loading";v=t('<div class="woo-tmpmasn '+n.attr("class")+'" style="position:relative;height:0;overflow:hidden;margin:0;padding:0;"></div>').removeClass(T),n.before(v)}var $=i.add(o).removeClass("woo-wait"),I=r?$.parent():v.append($);if(y=I.find(a.unit).not(".woo-f,.woo-wait").each(function(n,i){var o=t(i),r=o.data("id");(0===n&&l&&!a.rightAlignFirstBlock||n===C-1&&l&&a.rightAlignFirstBlock)&&(c=e.prePlaceUnit(o,x,C,s,l),d=c[0],u=c[1],f=c[2],p=c[3],h=c[4],m='<div class="woo woo-f co'+u+" "+(h?"woo-spcol":"")+'" data-ht="'+p+'" data-idx="'+e.unitCount+'" style="position:absolute;overflow:hidden;top:'+d+"px;left:"+f+"px;width:"+(e.firstWidth-a.columnMargin)+'px;"></div>',w+=m,g=P?I.find(".woo-f:first").css({left:f,top:d}):t(m).append(a.sinkWhat),g.data("idx",e.unitCount),_=n,k.conf.exrecycle&&e.exCoordMap(d,p,u),e.unitCount++),c=e.prePlaceUnit(o,x,C,s),d=c[0],u=c[1],f=c[2],p=c[3],h=c[4],w+='<div class="'+a.unit.substr(1)+" co"+u+(h?" woo-spcol":"")+'" '+(r?'data-id="'+r+'"':"")+' data-ht="'+p+'" data-idx="'+e.unitCount+'" style="top:'+d+"px;left:"+f+'px;"></div>',o.css({top:d,left:f}).data("ht",p).data("idx",e.unitCount),o.removeClass(function(e,t){return"woo-spcol "+(t.match(/co\d+/gi)||[]).join(" ")}).addClass((h?"woo-spcol ":"")+"co"+u),k.conf.exrecycle&&e.exCoordMap(d,p,u),e.unitCount++,e.standardUnitCount++}),n.data("colY",x),!P&&l){var j=y.toArray();y=t(j.slice(0,_).concat(g?g.toArray():[],j.slice(_)))}return v.empty(),[t(w),y]},exCoordMap:function(e,t,n){var i=this,o=i.arrColumnTail[n]||n;i.posCoordination[""+i.unitCount]=[e,t,n,o,-1,0],i.posCoordination[""+o]&&(i.posCoordination[""+o][4]=i.unitCount),i.arrColumnTail[n]=i.unitCount;var r=i.unitCount;a.setTimeout(function(){i.posCoordination[""+r][5]=1},800)}},t.Woo=k}(window)}).call(t,a(1))},function(e,t,a){var n=a(1);a(42),n.extend(n.History,{getNoPageHash:function(e){var t=e||window.location.hash.substr(1);return t.replace(/\-p\d+/gi,"")},getHashByIndex:function(e){var t=window.location.hash.substr(1);return t=t.split("-")[e]},hashAnalize:function(e){var t=e.indexOf(n.History.getHashByIndex(0));return t=0>t?-1:t}})},function(e,t,a){(function(e){!function(e){e.History?window.console.warn("$.History has already been defined..."):(e.History={options:{debug:!1},timer:null,state:"",$window:null,$iframe:null,handlers:{generic:[],specific:{}},extractHash:function(e){var t=e.replace(/^[^#]*#/,"").replace(/^#+|#+$/,"");return t},getState:function(){var t=e.History;return t.state},setState:function(t){var a=e.History;return t=a.extractHash(t),a.state=t,a.state},getHash:function(){var t=e.History,a=t.extractHash(window.location.hash||location.hash);return a},setHash:function(t){var a=e.History;return t=a.extractHash(t),"undefined"!=typeof window.location.hash?window.location.hash!==t&&(window.location.hash=t):location.hash!==t&&(location.hash=t),t},go:function(t){var a=e.History;t=a.extractHash(t);var n=a.getHash(),i=a.getState();return t!==n?a.setHash(t):(t!==i&&a.setState(t),a.trigger()),!0},hashchange:function(t,a,n){var i=e.History;if(i.nativeSupport||i.notSupportTrigger)i.firedFirstTime=!0,i.notSupportTrigger=!1;else if(i.nativeSupport=!0,i.timer&&clearInterval(i.timer),i.firedFirstTime)return!1;var o=i.getHash();return i.go(o),!0},bind:function(t,a){var n=e.History;return a?("undefined"==typeof n.handlers.specific[t]&&(n.handlers.specific[t]=[]),n.handlers.specific[t].push(a)):(a=t,n.handlers.generic.push(a)),!0},trigger:function(t){var a=e.History;"undefined"==typeof t&&(t=a.getState());var n,i,o,r;if("undefined"!=typeof a.handlers.specific[t])for(r=a.handlers.specific[t],n=0,i=r.length;i>n;++n)(o=r[n])(t);for(r=a.handlers.generic,n=0,i=r.length;i>n;++n)(o=r[n])(t);return!0},construct:function(){var t=e.History;return e(document).ready(function(){t.domReady()}),!0},configure:function(t){var a=e.History;return a.options=e.extend(a.options,t),!0},domReadied:!1,domReady:function(){var t=e.History;if(!t.domRedied)return t.domRedied=!0,t.$window=e(window),t.$window.bind("hashchange",this.hashchange),t.nativeSupport=t.nativeSupport(),setTimeout(t.hashchangeLoader,200),!0},nativeSupport:function(t){t=t||e.browser;var a=t.version,n=parseInt(a,10),i=a.split(/[^0-9]/g),o=parseInt(i[0],10),r=parseInt(i[1],10),s=parseInt(i[2],10),l=!1;return t.msie&&n>=8?l=!0:t.webkit&&n>=528?l=!0:t.mozilla?o>1?l=!0:1===o&&(r>9?l=!0:9===r&&s>=2&&(l=!0)):t.opera&&(o>10?l=!0:10===o&&r>=60&&(l=!0)),l},hashchangeLoader:function(){var t=e.History;if(t.nativeSupport){var a=t.getHash();a&&t.$window.trigger("hashchange")}else{var n;if(e.browser.msie){t.$iframe=e('<iframe id="jquery-history-iframe" style="display: none;"></iframe>').prependTo(document.body)[0],t.$iframe.contentWindow.document.open(),t.$iframe.contentWindow.document.close();var i=!1;n=function(){var e=t.getHash(),a=t.getState(),n=t.extractHash(t.$iframe.contentWindow.document.location.hash);a!==e?(i||(t.$iframe.contentWindow.document.open(),t.$iframe.contentWindow.document.close(),t.$iframe.contentWindow.document.location.hash=e),i=!1,t.notSupportTrigger=!0,t.$window.trigger("hashchange")):a!==n&&(i=!0,t.setHash(n))}}else n=function(){var e=t.getHash(),a=t.getState();a!==e&&(t.notSupportTrigger=!0,t.$window.trigger("hashchange"))};t.timer=setInterval(n,2e3)}return!0}},e.History.construct())}(e)}).call(t,a(1))},function(e,t,a){(function(e){var t=a(34),n=a(33);n.registerHelper("ifCond",function(e,t,a,n){switch(t){case"==":return e==a?n.fn(this):n.inverse(this);case"===":return e===a?n.fn(this):n.inverse(this);case"<":return a>e?n.fn(this):n.inverse(this);case"<=":return a>=e?n.fn(this):n.inverse(this);case">":return e>a?n.fn(this):n.inverse(this);case">=":return e>=a?n.fn(this):n.inverse(this);case"!=":return e!=a?n.fn(this):n.inverse(this);case"&&":return e&&a?n.fn(this):n.inverse(this);case"||":return e||a?n.fn(this):n.inverse(this);default:return n.inverse(this)}}),n.registerHelper("math",function(e,t,a,n){return e=parseFloat(e),a=parseFloat(a),{"+":e+a,"-":e-a,"*":e*a,"/":e/a,"%":e%a}[t]}),n.registerHelper("if",function(e,t){return e?t.fn(this):t.inverse(this)}),n.registerHelper("duitang",function(e){return"http://www.duitang.com/"+e}),n.registerHelper("timePattern",function(e){var t=(new Date).getTime(),a=1e3*e-t;if(a>0){var n=Math.floor(a/1e3/3600/24),i=Math.floor(a/1e3/3600-24*n),o=Math.floor((a-1e3*(60*i*60-24*n*3600))/1e6/60);return n+"天"+i+"时"+o+"分"}}),n.registerHelper("promotionDone",function(e,t){var a=(new Date).getTime(),n=1e3*e-a;return 0>n||t?"done":""}),n.registerHelper("promotionUrl",function(e,t,a){var n=(new Date).getTime(),i=1e3*t-n;return 0>i||a?"javascript:;":"/shopping/temaihui/detail/"+e+"/?__urlopentype=pageweb"}),n.registerHelper("taobaoUrl",function(e,t,a){var n=(new Date).getTime(),i=1e3*t-n;return 0>i||a?"javascript:;":e}),n.registerHelper("truncate",function(t,a){var n=e.trim(t).substring(0,a);return n}),n.registerHelper("pcjump",function(e,t){
var a=(new Date).getTime(),n=1e3*e-a,i=navigator.userAgent.toString().toLowerCase(),o=(!!i.match(/ipad/gi),!!i.match(/iphone/gi)),r=!!i.match(/android/gi);return 0>n||t?"target=_self":o||r?"":"target=_blank"}),n.registerHelper("dtImageTrans",function(a,n,i,o,r){var s=e.trim(a).replace(/^http(s)?:\/\//gi,""),s=s.split("/"),l=s[0],s=s[1];return-1==l.indexOf("duitang.com")||!s||"uploads"!=s&&"misc"!=s?a:n?(i=i||0,o=o||0,r=r?"_"+r:"",t.dtImageTrans(a).replace(/(\.[a-z_]+)$/gi,".thumb."+i+"_"+o+r+"$1")):a.replace(/(?:\.thumb\.\w+|\.[a-z]+!\w+)(\.[a-z_]+)$/gi,"$1")}),n.registerHelper("plus",function(e,t){return e+t}),n.registerHelper("sale",function(e,t){return(e/t*10).toFixed(1)}),n.registerHelper("exist",function(e,t){return e?t.fn(this):t.inverse(this)}),n.registerHelper("more",function(e,t){return e.cut(t)}),n.registerHelper("round",function(e,t){return-1!=e.toString().indexOf(".")?e.toFixed(t):e}),n.registerHelper("goto",function(e,t){return"/redirect/?to="+encodeURIComponent(e)+"&mk=b11_p_"+t+"&spm=2014.12553688.1.0"}),n.registerHelper("content",function(t,a){var n=e.G.trimLink(t,e.G.isSTAFF()),i=n;return i}),n.registerHelper("htmlescape",function(e){e=n.Utils.escapeExpression(e);var t=/(\n)/gi;return t.test(e)&&(e=e.replace(t,"<br>").replace(/\r/,"").replace(/\s/gi,"&nbsp;")),new n.SafeString(e)})}).call(t,a(1))},function(e,t,a){(function(e){!function(){e.fn.tabswitch=function(t,a,n){function i(e){e.preventDefault(),c(g.index(this),!0)}function o(e,t){for(var a=f.sub[0],n=f.sub[1],i=0;i<a.length&&i<n.length;i++){var o=g.eq(e),r=g.eq(t),s=a[i].replace(/\./,""),l=n[i].replace(/\./,"");if(o.hasClass(s)&&r.hasClass(l))return 1;if(o.hasClass(l)&&r.hasClass(s))return-1}return 0}function r(t){for(var a=g.eq(t),n=f.sub[0],i=f.sub[1],o=0;o<n.length;o++){var r=n[o].replace(/\./,"");if(a.hasClass(r))return g.index(e(i[o])[0])}return-1}function s(e){for(var t=g.eq(e),a=f.sub[0],n=f.sub[1],i=0;i<a.length&&i<n.length;i++){var o=a[i].replace(/\./,""),r=n[i].replace(/\./,"");if(t.hasClass(o)||t.hasClass(r))return g.filter(a[i])}return null}function l(t,a){for(var n=g.eq(t),i=f.sub[0],o=f.sub[1],r=0;r<o.length;r++){var s=o[r].replace(/\./,"");if(n.hasClass(s)){var l=e(i[r]).filter(".cur")[0];return a&&l?g.index(l):g.index(e(i[r])[0])}}return-1}function c(e,t){var a,n=g,i=g.index(a),c=f.sub&&f.sub[0]?f.sub[0].length:null,u=-1,p=-1,h=e;c&&(n=n.not(f.sub[0].join(",")),p=l(e,!0),u=r(e)),a=n.filter("."+v),i=g.index(a),n.add(m).removeClass(v),c&&1===o(e,i)?(s(e).removeClass(v),a.addClass(v)):c&&-1!==u?(s(e).removeClass(v),g.eq(u).addClass(v)):c&&-1!==p&&(g.eq(p).addClass(v),h=p),m.css("display","none").eq(h).css("display","block").add(g.eq(e)).addClass(v),f.auto&&d(),"function"==typeof f.fn&&f.fn(g,m,h,i,t)}function d(){window.clearTimeout(p),p=window.setTimeout(function(){var e=g.index(g.filter("."+v));c((e+1)%m.length,!0)},f.autodelay)}var u=this;"function"!=typeof t&&(n=a,a=t,t=e.noop),"string"!=typeof a&&(n=a,a="");var f=e.extend({},e.fn.tabswitch.defaults,n);f.fn=t;var p,h=!!a,m=e(f.cont),g=h?e(a,u):u,v=f.focus;return c(f.index),h?this.delegate(a,f.event,i):this.bind(f.event,i),e.fn.tabswitch.stop=function(){window.clearTimeout(p)},e.fn.tabswitch.resume=function(){f.auto&&d()},u},e.fn.tabswitch.defaults={cont:".tabswitch-cont",sub:[[".tabswitch-sub0"],[".tabswitch-main0"]],focus:"cur",index:0,event:"click",auto:!1,autodelay:3e3}}()}).call(t,a(1))},function(e,t,a){(function(e){a(1);!function(e){e.fn.confirm=function(t,a,n){"function"!=typeof t&&(n=a,a=t,t=e.noop),"string"!=typeof a&&(n=a,a=""),n=e.extend({},n);var i=n.dir?1:-1,o=n.tipword||"",r=function(t,a){l.css({display:"block",overflow:"hidden"}),e(".PL-cfm-cont",l).stop().clearQueue().css({marginTop:i*t}).animate({marginTop:i*a},300,"linear",function(){l.css("overflow","visible").css("display",a>t?"none":"block")})},s=function(a){a.preventDefault();var n,s,c=e(this),d=c.offset(),u=c.outerWidth(),f=c.outerHeight(),p=e(document).width(),h=e(document).height(),m=e(window).scrollTop(),g=e(window).scrollLeft(),v=e(window).width(),b=e(window).height(),w=l.outerWidth(),y=l.outerHeight(),k=12,x=-1===i?d.top+f+k:d.top-y-k,C=d.left-w/2+u/2;n=h-y-k,x=k>x?k:x>n?n:x,n=p-w-k,C=k>C?k:C>n?n:C,n=x-k,s=C-k,e("html").animate({scrollTop:m>n?n:(n=x+k+y-b)>m?n:"+=0",scrollLeft:g>s?s:(s=C+k+w-v)>g?s:"+=0"},300),l.css({top:x,left:C}).data({"this":this,event:a,fn:t}),e(".PL-cfm-wds",l).html(o),r(y,0)},l=e("#PL-confirm");if(!l.length){l=e('<div id="PL-confirm" class="PL-confirm"><div class="PL-cfm-cont"><div class="PL-cfm-wds tc">'+o+'</div><div class="PL-cfm-btns tc"><a class="abtn abtn-s PL-cfm-yes dib" href="javascript:;""><u>确定</u></a><a class="abtn abtn-s PL-cfm-no dib" target="_self" href="javascript:;"><u>取消</u></a></div></div></div>').appendTo("body");var c=function(){var e=l.outerHeight();r(0,e)};e(".PL-cfm-yes",l).click(function(e){e.preventDefault(),l.data("fn").call(l.data("this"),l.data("event"))}).click(c),e(".PL-cfm-no",l).click(c)}return a?this.delegate(a,"click",s):this.click(s),this}}(e)}).call(t,a(1))},function(e,t,a){(function(e){var t=a(1);t.G=a(9),a(47);var n=a(29),i=a(5);!function(e){function t(e){i.PopOut.alert([null,m,""],2)}function a(){w.find("a.abtn").addClass("abtn-no"),w.find(".s-sina").css({opacity:.5,color:"#aaa"})}function o(){w.find("a.abtn").removeClass("abtn-no"),w.find(".s-sina").css({opacity:1,color:"#333"})}function r(e,t){b.find("input[name=album_id]").val(e).end().find("a,span").html(t)}function s(e,t){y.html(t).attr("class",e)}function l(){g.val(""),s("","")}function c(t,a){e.G.blinkIt(function(){s("re-postsuc",x[0]+"成功！")},null,function(){i.PopOut.closeMask(),e.isFunction(a)&&a(t),l()},1,800);var n=e(".collection").find("em");1===n.length&&t.blog&&n.each(function(){n.html(parseInt(n.html())+1)})}function d(t,a){if(t){var n=e(h);if(n.addClass("re-done").attr("href","/blog/?id="+t).attr("target","_blank").attr("title","去看我的收集"),a){var i=n.closest(".woo").find(".d1"),o=e(".otheralbums h4").find("span").text(),r=parseInt(i.text())||parseInt(o)||0;i.html(r+1).removeClass("dn"),n.find("em").length&&n.find("i").addClass("y-done").end().find("em").html("已收集 "+(r+1))}}}function u(a,n,i,r,s){k=!1,x=["收集","收集到","收集"],p("/napi/blog/forward/",s,i),m.css("display","block"),l(),o();var c,d=a.closest(".center"),u="";d.length?(c=d.find(".js-favorite-blogtit"),u=c.html().replace(/\<br\>/gi,"\n").replace(/&nbsp;/gi," ")):(c=a.closest(".woo").find("div.g"),u=e("<div>"+c.html()+"</div>").find("a").remove().end().text()),g.val(e.trim(u)),e("#re-inp-parent").attr("name","parent").val(n),v.empty().scrollTop(0);var f,h,b=d.find(".js-favorite-blogimg");b.length?(f=b.data("width"),h=b.data("height")):(b=a.closest("div.woo").find("div.mbpho img"),f=b.outerWidth(),h=parseInt(b.attr("height"))),f>200&&(h=200*h/f,f=200),$i=e("<img />").attr("src",b.attr("src")).appendTo(v),$i.css({width:f,height:h,marginTop:200>=h?(200-h)/2:0,cursor:200>=h?"default":"move"}),e.data(v[0],"imgProp",{height:h}),t(a)}function f(a,n,i,r,s,c,d,u){k=u,x=["编辑","转移到","提交"],p("/napi/blog/edit/",s,i,c,d,u),m.css("display","block"),l(),o();var f,h=a.closest(".center"),b="";h.length?(f=h.find(".js-favorite-blogtit"),b=f.html().replace(/\<br\>/gi,"\n").replace(/&nbsp;/gi," ")):(f=a.closest(".woo").find("div.g"),b=e("<div>"+f.html()+"</div>").find("a").remove().end().text()),g.val(e.trim(b)),e("#re-inp-parent").attr("name","blog_id").val(n),v.empty().scrollTop(0);var w=h.find("img.js-favorite-blogimg");if(w.length)var y=w.data("height"),C=w.data("width"),y=200*y/C,_=e("<img />").attr("src",w.attr("src")).appendTo(v);else{w=a.closest("div.woo").find("div.mbpho img");var y=parseInt(w.attr("height")),_=e("<img />").attr("src",w.attr("src")).appendTo(v)}_.css({width:200,marginTop:200>y?(200-y)/2:0,cursor:200>=y?"default":"move"}),e.data(v[0],"imgProp",{height:y}),t(a)}function p(t,i,l,u,f,p){function h(e){n.keyupLenLimitForU(e.currentTarget,300,!0,!0)}if(m&&m.length)e.G.store(m);else{m=e('<div id="re-favorite"><form action="'+t+'" target="_self"><div id="re-head"><a id="re-close" target="_self" href="javascript:;" onclick="SUGAR.PopOut.closeMask();">关闭</a><h1>'+x[0]+'</h1></div><div id="re-cont" class="clr"><div id="re-left" class="l"></div> <div id="re-right" class="r"> <p>'+x[1]+'</p> <div id="re-albumsel"><input class="dn" type="text" data-optional="1" name="album_id"><a id="re-albumtrig" href="javascript:;">默认专辑</a><span id="re-onlyeditwds"></span></div><textarea name="msg"'+("编辑"==x[0]&&(parseInt(l)||e.G.isSTAFF())?' class="txa" ':' class="txa txa-no"  readonly="true"')+' data-optional="1" ></textarea> <div id="re-subpan" class="u-chk clr"> <a href="javascript:;" class="abtn l "><button type="submit"><u>'+x[2]+"</u></button></a>"+(void 0!=typeof BIND_SITES&&BIND_SITES.sina?'<input id="re-sycn-sina" type="checkbox" value="1" class="chk s-sina" name="syncpost" /><label class="s-sina" title="同步到新浪微博" for="re-sycn-sina">同步</label><div class="re-mbsite s-sina">新浪</div>':"")+'<div id="re-poststat"></div></div></div></div><input id="re-inp-parent" type="hidden" name="parent" value="" data-optional="1" /></form></div>'),e.G.store(m);var C=e.G.getYearCookie("sync");e("#re-sycn-sina").prop("checked",-1===C.indexOf("sina")?!1:!0).change(function(){var t=e(this),a=t.attr("value");C=C.replace(new RegExp(","+a,"ig"),""),t.prop("checked")||-1!==C.indexOf(a)?t.prop("checked")&&e.G.setYearCookie("sync",C+","+a):e.G.setYearCookie("sync",C)}),y=e("#re-poststat"),b=m.find("#re-albumsel"),b.removeClass("re-onlyedit").find("a").myalbums({sel_valueipt:b.find("input[name=album_id]"),sel_holder:m}),v=e("#re-left").mousemove(function(t){if(t.stopPropagation(),!e.data(this,"movelock")){var a=e(this),n=e.data(this,"imgProp")||{},i=n.height;if(i>200){var o=t.pageY,r=v.offset().top,s=o-r-50,s=0>s?0:s;e.data(this,"movelock",!0),a.stop().animate({scrollTop:s*(i-200)*2/200},50,"linear",function(){e.data(a[0],"movelock",!1)})}}}),g=m.find("textarea.txa"),g.keyup(h).blur(h).focus(h),n.keyupLenLimitForU(g[0],300,!0,!0),e.fn.at&&g.at({isFixed:!0}),w=m.find("form").safeSubmit(function(t){var n=e(this),r=g.val(),l=b.find("input").val(),u=e("#re-albumtrig").text(),f=n.find("a.abtn");f.find("[type=submit]");if(!f.hasClass("abtn-no")){a(),s("re-inpost","正在提交，请稍候");var p=n.getFormAction(),h=n.serializeObject();"/napi/blog/forward/"===p&&(h.album=h.album_id,delete h.album_id),e.ajax({url:p,data:h,success:function(t){var a=e.isPlainObject(t)?t:e.parseJSON(t);if(!a||"object"!=typeof a)return void s("re-posterr","出现异常，可能是网络原因");if(a.data||(a.data={}),a.data.content=r,a.data.albumid=l,a.data.albumname=u,a.success||1===a.status){var n=b.find("[name=album_id]").val(),f=b.find("a").html();!k&&n&&"0"!=n&&(e.Bom.removeCookie("sgt"),e.Bom.setSubCookie("sgt","ai"+e.G.getUSERID(),n,{expires:30}),e.Bom.setSubCookie("sgt","an"+e.G.getUSERID(),f,{expires:30})),c(a.data,i),d(a.data&&a.data.blog&&a.data.blog.id,1)}else if(a.data&&a.data.robot_check);else{var p=e.trim(e.G.mergeServerMessage(a.message));s("re-posterr",p),o(),"你已经收集了该分享"==p?d():o(),e.G.gaq("/_trc/Error/ajax/response_"+p+"_forward")}},myerror:function(){s("re-posterr","网络原因导致失败，请稍候再试"),o()}}).always(function(){})}},function(t){e.G.blinkIt(function(){g.css({backgroundColor:"#d7ebf7"})},function(){g.css({backgroundColor:"#fff"})},function(){g.focus()},4,200)})}if(p?(b.addClass("re-onlyedit"),e("#re-subpan").find("input,label,div.re-mbsite").css("visibility","hidden")):(b.removeClass("re-onlyedit"),e("#re-subpan").find("input,label,div.re-mbsite").css("visibility","visible")),"undefined"!=typeof u)u=u||"",f=f||"默认专辑",r(u,f);else{var _=e.Bom.getSubCookie("sgt","ai"+e.G.getUSERID())||"",P=e.Bom.getSubCookie("sgt","an"+e.G.getUSERID())||"默认专辑";r(_,P)}w.attr("action",t),m.find("h1").html(x[0]).end().find("#re-right p").eq(0).html(x[1]).end().find(".abtn u").html(x[2])}var h,m,g,v,b,w,y,k=!1,x=["收集","收集到","收集"];e.fn.SGfavorite=function(t){function a(t){if(e(this).hasClass("re-done"))return!0;t.stopPropagation(),t.preventDefault();var a=e(this),n=a.data("favorite"),n=n?n:a.closest(".collbtn").data("favorite"),i=n?n.id:0,r=e.G.getUSERID(),s=n.owner,l=n.rooter;if(h=this,1!=n.edit||s!=r&&!e.G.isSTAFF()){if(s==r)return void alert("你收集过的，不能再收集哦~");if(l==r)return void alert("你第一次发布的，不能再收集哦~");var c=a.parent();c.hasClass("collbtn")&&e.G.gaq("/_trc/Repost/waterfall/popstart"),u(a,i,l,s,o)}else f(a,i,l,s,o,n.belongalbumid,n.belongalbumname,n.onlyedit)}t=t||{};var n=t.etype||"click",o=t.callback;return e.G.getUSERID()<=0?(this.attr("title")||this.attr("title","登录才能进行操作哦，点击就可以登录啦"),e(document).on(n,this.selector,function(e){e.stopPropagation(),e.preventDefault(),i.PopOut.login()})):e(document).on(n,this.selector,a),this},e.fn.SGcomment=function(t){function a(t,a,n,i,o,r,s){var l=o.find(".re-comt");o.find(".re-comt").stop().clearQueue().animate({height:0},200).queue(function(){e.Woo.resetCol(-118,r,s),e.data(i[0],"comment",-1),l.find("textarea").blur()}),e.data(i[0],"comment",0)}function n(t,a,n,i,o,r,s,l){if("undefined"==typeof e.data(i[0],"comment")){var c=e('<li class="re-comt"><img width="24" height="24" src='+USER.smallAvatar+'><form action="/napi/comment/create/"><div class="pb8"><textarea class="txa" name="content" placeholder="发布评论..."></textarea><a class="abtn l" href="#"><u>评论</u></a></div><input type="hidden" name="_type" value=""/><input type="hidden" value="'+a+'" name="comment_message_id"></form></li>');o.after(c),e.fn.at&&c.find("textarea").at({pageMembers:r.find("li p a:first-child")}),c.find("a.abtn").click(function(t){t.stopPropagation(),t.preventDefault();var a=e(this),n=a.closest("form"),i=n.find("textarea"),o=e.trim(i.val());return o?void(a.hasClass("abtn-no")||(a.addClass("abtn-no"),e.ajax({url:"/napi/comment/create/",data:n.paramForm(),mysuccess:function(t,n){var o=e(".dt-avatar").attr("src"),r=e(['<li><a href="/myhome/" target="_blank"><img src="',o,'" width="24" height="24"></a><p><a href="/myhome/" target="_blank">我</a><br/><span>',t.data.content.replace(/<br\s*\/?>/i," ").replace(/@[\u2E80-\u9FFF\d\w]{1,20}/gi,""),"</span></p></li>"].join(""));c.before(r.css("display","none")),i.val(""),r.slideDown(200,function(){e.Woo.resetCol(r.outerHeight(!0),s,l)});var d=a.closest(".woo").find(".d3"),u=parseInt(d.text())||0;d.html(++u).removeClass("dn")},myerror:function(){this.errormsg()}}).always(function(){a.removeClass("abtn-no")}))):void alert("请输入内容！")})}var d=e(window),u=d.height(),f=d.scrollTop(),p=r.find(".re-comt"),h=p.offset(),m=h.top,g=m+118-(u+f);if(g>0){var v=e.browser,b=v.webkit,w=e(b?"body":"html");w.animate({scrollTop:"+="+g},400,function(){})}p.stop().clearQueue().animate({height:118},200).queue(function(){e.Woo.resetCol(118,s,l),e.data(i[0],"comment",1),p.find("textarea").focus()}),e.data(i[0],"comment",0)}function o(t){t.stopPropagation(),t.preventDefault();var i,o=e(t.target).closest("a"),r=o.closest(".woo"),s=r.find(".f").last(),l=r.find("li").not(".re-comt").last(),c=o.closest(".collbtn").data("favorite"),c=c?c:s.data("favorite");if(!s.length&&c&&c.id)return void(window.location.href="/blog/?id="+c.id+"#reply");if(i=e.data(s[0],"comment"),0!==i){var d=c.id,u=c.owner,f=e.data(e("#woo-holder")[0],"zindex")||10,i=void 0==i||0>i?!1:!0,p=r[0].className,h=e.G.getNum(p.match(/\bco\d+\b/gi).toString()),m=parseInt(r.css("top"))||0;r.css("zIndex",++f),e.data(e("#woo-holder")[0],"zindex",f),i?a(o,d,u,s,r,h,m):n(o,d,u,s,l,r,h,m)}}t=t||{};var r="click";return e.G.getUSERID()?e(document).on(r,this.selector,o):(this.attr("title","登录才能评论，点击下就可以登录啦"),e(document).on(r,this.selector,function(e){e.stopPropagation(),e.preventDefault(),i.PopOut.login()})),this},e.fn.SGlike=function(t){function a(t,a,n){t.hasClass("no-sub")||(t.addClass("no-sub"),n=n||1,e.ajax({url:"/napi/like/",data:"object_id="+a+"&category="+n,mysuccess:function(a,n){t.addClass("re-zan");var i=t.closest(".woo").find(".d2"),o=t.closest(".action").find("em"),r=i.html(),s=0;t.data("like")?t.data("like").likeid=a.data.liked_id:t.data("like",{likeid:a.data.liked_id+""}),s=r?parseInt(r)+1:1,i.length&&i.html(s).removeClass("dn")&&(t.find("i").length?t.find("i").html(s).addClass("z-done"):t.html(s).addClass("z-done")),o.length&&o.each(function(){e(this).html(parseInt(o.html())+1)})},myerror:function(){this.errormsg()}}).always(function(){t.removeClass("no-sub")}))}function n(t,a){t.hasClass("no-sub")||(t.data("like")&&(a=t.data("like").likeid),a&&(t.addClass("no-sub"),e.ajax({url:"/napi/unlike/",data:"like_id="+a,mysuccess:function(a,n){t.removeClass("re-zan");var i=t.closest(".woo").find(".d2"),o=t.closest(".action").find("em"),r=i.html(),s=0;s=parseInt(r)>1?parseInt(r)-1:0,i.length&&(s?i.html(s):i.html(s).addClass("dn"))&&(t.find("i").length?t.find("i").html(s).removeClass("z-done"):t.html(s).removeClass("z-done")),o.length&&o.each(function(){e(this).html(parseInt(o.html())-1<0?0:parseInt(o.html())-1)})},myerror:function(){this.errormsg()}}).always(function(){t.removeClass("no-sub")})))}function o(t){t.stopPropagation(),t.preventDefault();var i=e(this),o=i.data("favorite"),o=o?o:i.closest(".collbtn").data("favorite"),r=o.id,s=(o.owner,o.likeid),l=o.type;i.hasClass("re-zan")?n(i,s):a(i,r,l)}t=t||{};var r="click";e.G.getUSERID()?e(document).on(r,this.selector,o):(this.attr("title")||this.attr("title","登录之后才能赞哦！"),e(document).on(r,this.selector,function(e){e.stopPropagation(),e.preventDefault(),i.PopOut.login()}))}}(e),t(function(){var e=t("#woo-holder");if(e.length){var a=t(window),n=t.browser.msie,i=n&&"6.0"===t.browser.version;a.scroll(function(){var n=a.scrollTop(),o=t("#collbtn");if(o.length&&!i){var r=e.data("offset"),s=0;if(r){var l=o.closest("div.woo"),c=parseInt(l.css("top"))||0,d=r.top,u=-20,f=65;if(n-(d+c)+u+s+f>0){var p=l.offset().left;l.find(".collbtn").css({left:p,position:"fixed",top:s+f,display:"block"})}else l.find(".collbtn").css({position:"absolute",left:0,top:s,display:"block"})}}})}})}).call(t,a(1))},function(e,t,a){(function(e){a(1);!function(e){e.fn.myalbums=function(t,a,n){function i(t){e.G.getUSERID()&&(e(u.sel_holder)!=e("body")?l.appendTo(u.sel_holder):l.css({position:"absolute",zIndex:30001,left:t.left+u.biasleft,top:t.top+u.biasleft}),l.css("display","block"==l.css("display")?"none":"block"),!s.data("loaded")&&e("a",d).length<=1?(d.addClass("loading"),e.ajax({cache:!1,type:"GET",url:"/napi/album/list/by_user/?limit=150",mysuccess:function(t,a){d.removeClass("loading");var n=t.data.object_list,i=c.val();if(n&&n.length){for(var o=0,r=n.length;r>o;o++)e("<a "+(i==n[o].id?'class="cur"':"")+' href="#" data-albumid="'+n[o].id+'">'+n[o].name.cut(40,"…")+"</a>").appendTo(d);0==i&&d.find("a").eq(0).addClass("cur")}s.data("loaded",1)},myfailure:function(e,t){d.removeClass("loading")}})):l.find(".cur").removeClass("cur").end().find("a[data-albumid="+c.val()+"]").addClass("cur"))}function o(e,t){c.val(e),s.html(t),d.find(".cur").removeClass("cur").end().find("a[data-albumid="+e+"]").addClass("cur").prependTo(d),d.scrollTop(0),l.css("display","none")}function r(){c=e(u.sel_valueipt),c.length||(c=e('<input class="dn" type="text" value="">').appendTo(s)),l=e("#myalbums-wrap"),l.length||(l=e('<div id="myalbums-wrap" style="display:none"><div id="myalbums-albs"></div><div class="clr"><form action="/napi/album/create/" method="post"><input type="text" value="" name="name" class="ipt l" maxlength="40"><a target="_self" href="javascript:;" class="abtn l"><button type="submit"><u>创建</u></button></a></form></div></div>').click(function(e){e.stopPropagation()}).appendTo("body"),l.find("input").lengthLimit()),e(document).click(function(e){l.css("display","none")}),d=e("#myalbums-albs"),d.delegate("a","click",function(t){t.preventDefault();var a=this.innerHTML,n=e(this).data("albumid")||"";o(n,a)});var t=e.browser.mozilla?"DOMMouseScroll":"mousewheel";navigator.userAgent.toString().match(/ipad/gi)&&(e('<a id="ipadalbumselectordown" class="ipadalbumsel" href="javascript:;"></a>').appendTo(l).click(function(e){d.get(0).scrollTop+=26}).bind("dblclick",function(e){e.preventDefault(),e.stopPropagation()}),e('<a id="ipadalbumselectorup" class="ipadalbumsel" href="javascript:;"></a>').appendTo(l).click(function(e){d.get(0).scrollTop-=26}).bind("dblclick",function(e){e.preventDefault(),e.stopPropagation()})),d.bind(t,function(e){e.originalEvent.wheelDelta?this.scrollTop+=-1*e.originalEvent.wheelDelta:this.scrollTop+=e.originalEvent.detail>0?60:-60,e.preventDefault()}),l.find("input").click(function(){e(this).focus()}),l.find("form").safeSubmit(function(t){var a=this,n=e(a),i=n.find(".abtn"),r=i.find("[type=submit]");i.hasClass("abtn-no")||(i.addClass("abtn-no"),e.ajax({url:n.getFormAction(),data:n.paramForm(),mysuccess:function(t,a){var i=n.find("input"),r=e.trim(i.val());i.val(""),d.prepend(e('<a href="#" data-albumid="'+t.data.album.id+'">'+r.cut(40,"…")+"</a>")).scrollTop(0),o(t.data.album.id,r)},myfailure:function(e,t){e.data&&e.data.robot_check?r.verif({w:1}):this.wrongmsg(e)}}).always(function(){i.removeClass("abtn-no")}))}),p.bind(u.event,function(t){t.stopPropagation(),t.preventDefault();var a=e(this).offset();i(a)})}var s=this;if(!(s.length<=0)){"function"!=typeof t&&(n=a,a=t,t=e.noop),"string"!=typeof a&&(n=a,a="");var l,c,d,u=e.extend({},e.fn.myalbums.defaults,n),f=!!a,p=f?e(a,s):s;return u.fn=t,r(),l}},e.fn.myalbums.defaults={sel_holder:"body",sel_valueipt:"",event:"click",biastop:0,biasleft:0}}(e)}).call(t,a(1))},function(e,t,a){(function(t){function n(e){if(e.length){var t=e.find("div.woo-pcont:visible").offset(),a=t.top,n=t.left,i=parseInt(e.css("marginLeft"))||0;e.data("offset",{left:n-i,top:a})}}a(1),a(46);var i=function(){function e(e,t){t?e.addClass("woocov"):e.removeClass("woocov")}t("div.woo .collbtn .y").SGfavorite(),t("div.woo .collbtn .x").SGcomment(),t("div.woo .collbtn .z").SGlike();var a=t("#woo-holder"),i=t(window);if(a.length){var o=t.browser.msie,r=o&&"6.0"===t.browser.version,s=-20,l=0,c=65;r?a.on("mousemove","div.woo",function(o){n(a);var r=t(this),s=parseInt(r.css("top"))||0,d=i.scrollTop(),u=a.data("offset"),f=u.top;e(r.find(".a u"),!0),r.find(".collbtn").css({display:"block",top:Math.max(d-(f+s)-l+c,l)})}):(a.on("mouseenter","div.woo",function(o){n(a);var r=t(this),d=r.find(".collbtn"),u=parseInt(r.css("top"))||0,f=i.scrollTop(),p=a.data("offset"),h=p.top;if(e(r.find(".a u"),!0),t("#collbtn").css("display","none").removeAttr("id").addClass("collbtn"),d.attr("id","collbtn").addClass("collbtn"),f-(h+u)+s+l+c>0){var m=r.offset().left;d.css({left:m,position:"fixed",top:l+c,display:"block"})}else d.css({position:"absolute",left:0,top:l,display:"block"})}),a.on("mousemove","div.woo",function(e){var a=t(this),n=a.find(".collbtn");t("#collbtn")[0]!=n[0]&&t("#collbtn").css("display","none").removeAttr("id").addClass("collbtn"),n.attr("id","collbtn").addClass("collbtn")})),a.on("mouseleave","div.woo",function(a){var n=t(this);e(n.find(".a u"),!1),n.find(".collbtn").css("display","none").removeAttr("id").addClass("collbtn")})}};e.exports=i}).call(t,a(1))},,function(e,t,a){var n=a(1),i=a(4);a(51),a(9);var o=function(){function e(e){var a=n("#Mess-send");a.length||(a=n('<div id="Mess-send" class="win-wraper Mess-send"> <form id="form-message" method="post"> <input type="hidden" name="action" value="sendmsg"/> <textarea id="txa-message" name="msg" class="txa"></textarea> <div class="clr mt8"> <a class="abtn l" target="_self" href="javascript:;" ><button type="submit"><u>发送</u></button></a> </div> <input type="hidden" id="Mess-toid" name="user_id" value=""/> </form> </div>'),n.G.store(a)),a.find("form").safeSubmit(function(e){t(this)}),n("[data-sendto]",e).click(function(){if(!n.G.getUSERID())return void i.PopOut.login();var e=n(this),t=e.data("sendto");n("#Mess-toid").val(t.id),n(".abtn","#form-message").removeClass("abtn-no"),n("textarea","#Mess-send").val(""),i.PopOut.alert(['发送信息给<u class="red">'+t.name.cut(28,"…")+"</u>",a[0],""])})}function t(e,t,a){var o=n(e),r=o.find(".abtn");r.find("[type=submit]");r.hasClass("abtn-no")||(r.addClass("abtn-no"),n.ajax({url:"/napi/letter/create/",data:o.paramForm(),mysuccess:function(e,t){i.PopOut.alert('<div class="prompt prompt-success"><h3>发送消息成功！</h3></div>'),n({}).delay(1e3).queue(function(){i.PopOut.closeMask(0)})},myerror:function(){this.errormsg()}}).always(function(){r.removeClass("abtn-no")}))}return{init:e}}();e.exports=o},function(e,t,a){(function(e){!function(e){function t(e){e.preventDefault(),e.type="safeSubmit",a.handle?a.handle.apply(this,arguments):a.dispatch&&a.dispatch.apply(this,arguments)}var a=e.event;a.special;a.special.safeSubmit={setup:function(){var n=this;e(n);a.add(n,"submit",t)},teardown:function(){var n=this;e(n);a.remove(n,"submit",t)}},e.fn.safeSubmit=function(t,a,n){return"function"!=typeof n&&(n=a,a=t,t=null),n=n||function(){alert("请输入内容")},arguments.length>0?this.unbind("safeSubmit").bind("safeSubmit",t,function(t){var i=this,o=e(i),r=e("input[type=text],textarea",o).not("[data-optional]"),s=e("[type=submit]",o);safe=!0,r.each(function(t,a){""===e.trim(e(a).val())&&safe&&(safe=!1)}),s.each(function(t,a){e(a).prop("disabled")&&safe&&(safe=!1)}),safe?a.call(this,arguments):n.call(this,arguments)}):this.trigger("safeSubmit")}}(e)}).call(t,a(1))},,,function(e,t,a){var n=a(1);n(function(){function e(e,t){s?s.setItem(e,t):n.G.setYearCookie(e,t)}function t(e){return s?s[e]:n.G.getYearCookie(e)}function a(){var e=parseInt(t("guidealbum"))||0;i(e+1)}function i(i){if(!f)if(f=!0,1==i){var o=n("#action-like"),r=o.find(".albumlikebtn");if(r.length){o.css({position:"relative"});var s=n('<div id="guide-album-like"></div>').css({position:"absolute",top:6,left:-184}).click(function(){n(this).remove(),e("guidealbum",4)});o.append(s),n.G.getUSERID()&&r.click(function(){s.remove(),f=!1,e("guidealbum",1),a()})}}else if(2==i){var l=n("#prof"),c=l.offset();if(c){var d=n('<div id="guide-album-find"></div>').css({position:"absolute",zIndex:999,top:c.top+34,left:c.left-140}).click(function(){n(this).remove(),f=!1,e("guidealbum",2),a()});n("body").append(d),l.find("ul").one("mouseover",function(){e("guidealbum",2)})}}else if(3==i){var u=t("guidealbum"),p=n("#createalbum-pp"),h=n("#nonealb");if(u.length&&h.length&&n.G.getNum(h.attr("href"))==n.G.getUSERID()){if($prent=p.parent().css({position:"relative"}),2.1!=u){var m=n('<div id="guide-album-yours"></div>').css({position:"absolute",top:-111,left:163}).click(function(){u=t("guidealbum"),f=!1,n(this).remove(),u>2.5?e("guidealbum",3):e("guidealbum",2.1)});$prent.append(m)}if(2.2!=u){var g=n('<div id="guide-album-create"></div>').css({position:"absolute",top:-46,left:165}).click(function(){u=t("guidealbum"),n(this).remove(),f=!1,u>2?e("guidealbum",3):e("guidealbum",2.2)});$prent.append(g),p.click(function(){g.remove(),f=!1,u>2?e("guidealbum",3):e("guidealbum",2.2)})}}}else if(5==i){var o=n("#action-like"),r=o.find(".albumlikebtn");r.length&&n.G.getUSERID()&&r.click(function(){f=!1,e("guidealbum",1),a()})}}function o(){var e=parseInt(t("guideappend"))||0;r(e+1)}function r(t){if(!p&&(p=!0,1==t)){var i=n("#action-addpic");if(i.length){i.css({position:"relative"});var o=n('<div id="guide-album-append"></div>').css({position:"absolute",top:6,left:-184}).click(function(){n(this).remove(),p=!1,e("guideappend",1),a()});i.append(o),n.G.getUSERID()&&i.find("#postinalbum").click(function(){o.remove(),p=!1,e("guideappend",1),a()})}}}var s;try{s=window.localStorage}catch(l){}var c=n.browser,d=c.msie,u=0;d&&(u=0);var f=!1;a();var p=!1;o()})},,,,,,,function(e,t,a){(function(e){a(1);!function(e){e.fn.turnlink=function(){return this.html(function(t,a){var n,i=[],o=[],r=/\[\[((?:http(?:s)?:\/\/)(?:(?:[\w-]+\.)+[\w-]+)(?:\:\d+)?(?:\/[\w-\.\/%]*)\.(tiff|psd|gif|png|bmp|tga|png|jpg|jpeg|img)?)\]\]/gi,s=/(?:http(?:s)?:\/\/)(?:(?:[\w-]+\.)+[\w-]+)(?:\:\d+)?(?:\/[\w-\.\/%]*)?(?:[?][\w-\.\/%!*\(\);\:@&=+$,\[\]]*)?(?:#[\w-\.\/%!*\(\);\:@&=+$,\[\]]*)?/gi;a=a.replace(r,function(t,a){return'<div class="turnlink-img"><img src="'+e.G.dtImageTrans(a,!0,600)+'" /></div>'}),n=a.replace(/<a[^>]*>[^<]*<\/a>/gi,function(e){var t=[];return t.length=e.length+1,t.join("*")}),n=n.replace(/<[^>]*>/gi,function(e){var t=[];return t.length=e.length+1,t.join("*")}),n.replace(s,function(e,t){i.push({url:e,pos:t})});for(var l=0,t=0;t<i.length;t++){var c=i[t].pos,d=i[t].url.length,u=i[t].url;o.push(a.substring(l,c)),o.push('<a href="'+u+'" target="_blank">'+u+"</a>"),l=c+d}return o.push(a.substring(l)),o.join("")}),this}}(e)}).call(t,a(1))},,function(e,t,a){a(15);var n=a(1);!function(){n.G&&!n.G.reTop&&(n.G.reTop=function(){var e,t=n.browser,a=t.msie&&"6.0"===t.version,i=t.webkit,o=!1,r=n(window),s=n("#retotop");if(!s.length){s=n('<a href="#" id="retotop"></a>').sidepop({id:"side-retotop",dockSide:"right",width:50,height:50,scroll:2,departure:16,baseline:"bottom",bias:16,isFixed:!0,zIndex:100,btnset:0}),s.css({margin:"0px"}).click(function(e){e.preventDefault();var t=this;o=!0;var a=n(i?"body":"html");a.animate({scrollTop:0},200,function(){n(t).css("visibility","hidden"),o=!1})});var l=function(){clearTimeout(e),o||(e=window.setTimeout(function(){var e=r.scrollTop(),t=r.height();if(s.css("visibility",e>100?"visible":"hidden"),a){s.css({top:e+t-n("#retotop").outerHeight()-16})}},100))};r.scroll(l),l()}},n(function(){n.Woo&&n.Woo.WooTemp||n.G.reTop()}))}()},,,,,,,,,,,,function(e,t,a){(function(e){!function(e){function t(){return e("<div/>")}var a=Math.abs,n=Math.max,i=Math.min,o=Math.round;e.imgAreaSelect=function(r,s){function l(e){return e+ge.left-ve.left}function c(e){return e+ge.top-ve.top}function d(e){return e-ge.left+ve.left}function u(e){return e-ge.top+ve.top}function f(e){return e.pageX-ve.left}function p(e){return e.pageY-ve.top}function h(e){var t=e||W,a=e||q;return{x1:o(ye.x1*t),y1:o(ye.y1*a),x2:o(ye.x2*t),y2:o(ye.y2*a),width:o(ye.x2*t)-o(ye.x1*t),height:o(ye.y2*a)-o(ye.y1*a)}}function m(e,t,a,n,i){var r=i||W,s=i||q;ye={x1:o(e/r||0),y1:o(t/s||0),x2:o(a/r||0),y2:o(n/s||0)},ye.width=ye.x2-ye.x1,ye.height=ye.y2-ye.y1}function g(){D&&de.width()&&(ge={left:o(de.offset().left),top:o(de.offset().top)},N=de.innerWidth(),M=de.innerHeight(),ge.top+=de.outerHeight()-M>>1,ge.left+=de.outerWidth()-N>>1,B=o(s.minWidth/W)||0,V=o(s.minHeight/q)||0,X=o(i(s.maxWidth/W||1<<24,N)),J=o(i(s.maxHeight/q||1<<24,M)),"1.3.2"!=e().jquery||"fixed"!=we||ke.getBoundingClientRect||(ge.top+=n(document.body.scrollTop,ke.scrollTop),ge.left+=n(document.body.scrollLeft,ke.scrollLeft)),ve=/absolute|relative/.test(L.css("position"))?{left:o(L.offset().left)-L.scrollLeft(),top:o(L.offset().top)-L.scrollTop()}:"fixed"==we?{left:e(document).scrollLeft(),top:e(document).scrollTop()}:{left:0,top:0},F=l(0),U=c(0),(ye.x2>N||ye.y2>M)&&_())}function v(t){if(Q){switch(ue.css({left:l(ye.x1),top:c(ye.y1)}).add(fe).width(se=ye.width).height(le=ye.height),fe.add(pe).add(me).css({left:0,top:0}),pe.width(n(se-pe.outerWidth()+pe.innerWidth(),0)).height(n(le-pe.outerHeight()+pe.innerHeight(),0)),e(he[0]).css({left:F,top:U,width:ye.x1,height:M}),e(he[1]).css({left:F+ye.x1,top:U,width:se,height:ye.y1}),e(he[2]).css({left:F+ye.x2,top:U,width:N-ye.x2,height:M}),e(he[3]).css({left:F+ye.x1,top:U+ye.y2,width:se,height:M-ye.y2}),se-=me.outerWidth(),le-=me.outerHeight(),me.length){case 8:e(me[4]).css({left:se>>1}),e(me[5]).css({left:se,top:le>>1}),e(me[6]).css({left:se>>1,top:le}),e(me[7]).css({top:le>>1});case 4:me.slice(1,3).css({left:se}),me.slice(2,4).css({top:le})}t!==!1&&(e.imgAreaSelect.onKeyPress!=Ce&&e(document).unbind(e.imgAreaSelect.keyPress,e.imgAreaSelect.onKeyPress),s.keys&&e(document)[e.imgAreaSelect.keyPress](e.imgAreaSelect.onKeyPress=Ce)),_e&&pe.outerWidth()-pe.innerWidth()==2&&(pe.css("margin",0),setTimeout(function(){pe.css("margin","auto")},0))}}function b(e){g(),v(e),Z=l(ye.x1),ee=c(ye.y1),te=l(ye.x2),ae=c(ye.y2)}function w(e,t){s.fadeSpeed?e.fadeOut(s.fadeSpeed,t):e.hide()}function y(e){var t=d(f(e))-ye.x1,a=u(p(e))-ye.y1;ce||(g(),ce=!0,ue.one("mouseout",function(){ce=!1})),Y="",s.resizable&&(a<=s.resizeMargin?Y="n":a>=ye.height-s.resizeMargin&&(Y="s"),t<=s.resizeMargin?Y+="w":t>=ye.width-s.resizeMargin&&(Y+="e")),ue.css("cursor",Y?Y+"-resize":s.movable?"move":""),G&&G.toggle()}function k(t){e("body").css("cursor",""),
(s.autoHide||ye.width*ye.height==0)&&w(ue.add(he),function(){e(this).hide()}),e(document).unbind("mousemove",P),ue.mousemove(y),s.onSelectEnd(r,h())}function x(t){return 1!=t.which?!1:(g(),Y?(e("body").css("cursor",Y+"-resize"),Z=l(ye[/w/.test(Y)?"x2":"x1"]),ee=c(ye[/n/.test(Y)?"y2":"y1"]),e(document).mousemove(P).one("mouseup",k),ue.unbind("mousemove",y)):s.movable?(R=F+ye.x1-f(t),E=U+ye.y1-p(t),ue.unbind("mousemove",y),e(document).mousemove(T).one("mouseup",function(){s.onSelectEnd(r,h()),e(document).unbind("mousemove",T),ue.mousemove(y)})):de.mousedown(t),!1)}function C(e){K&&(e?(te=n(F,i(F+N,Z+a(ae-ee)*K*(te>Z||-1))),ae=o(n(U,i(U+M,ee+a(te-Z)/K*(ae>ee||-1)))),te=o(te)):(ae=n(U,i(U+M,ee+a(te-Z)/K*(ae>ee||-1))),te=o(n(F,i(F+N,Z+a(ae-ee)*K*(te>Z||-1)))),ae=o(ae)))}function _(){Z=i(Z,F+N),ee=i(ee,U+M),a(te-Z)<B&&(te=Z-B*(Z>te||-1),F>te?Z=F+B:te>F+N&&(Z=F+N-B)),a(ae-ee)<V&&(ae=ee-V*(ee>ae||-1),U>ae?ee=U+V:ae>U+M&&(ee=U+M-V)),te=n(F,i(te,F+N)),ae=n(U,i(ae,U+M)),C(a(te-Z)<a(ae-ee)*K),a(te-Z)>X&&(te=Z-X*(Z>te||-1),C()),a(ae-ee)>J&&(ae=ee-J*(ee>ae||-1),C(!0)),ye={x1:d(i(Z,te)),x2:d(n(Z,te)),y1:u(i(ee,ae)),y2:u(n(ee,ae)),width:a(te-Z),height:a(ae-ee)},v(),s.onSelectChange(r,h())}function P(e){return te=/w|e|^$/.test(Y)||K?f(e):l(ye.x2),ae=/n|s|^$/.test(Y)||K?p(e):c(ye.y2),_(),!1}function S(t,a){te=(Z=t)+ye.width,ae=(ee=a)+ye.height,e.extend(ye,{x1:d(Z),y1:u(ee),x2:d(te),y2:u(ae)}),v(),s.onSelectChange(r,h())}function T(e){return Z=n(F,i(R+f(e),F+N-ye.width)),ee=n(U,i(E+p(e),U+M-ye.height)),S(Z,ee),e.preventDefault(),!1}function $(){e(document).unbind("mousemove",$),g(),te=Z,ae=ee,_(),Y="",he.is(":visible")||ue.add(he).hide().fadeIn(s.fadeSpeed||0),Q=!0,e(document).unbind("mouseup",I).mousemove(P).one("mouseup",k),ue.unbind("mousemove",y),s.onSelectStart(r,h())}function I(){e(document).unbind("mousemove",$).unbind("mouseup",I),w(ue.add(he)),m(d(Z),u(ee),d(Z),u(ee)),this instanceof e.imgAreaSelect||(s.onSelectChange(r,h()),s.onSelectEnd(r,h()))}function j(t){return 1!=t.which||he.is(":animated")?!1:(g(),R=Z=f(t),E=ee=p(t),e(document).mousemove($).mouseup(I),!1)}function A(){b(!1)}function z(){D=!0,H(s=e.extend({classPrefix:"imgareaselect",movable:!0,parent:"body",resizable:!0,resizeMargin:10,onInit:function(){},onSelectStart:function(){},onSelectChange:function(){},onSelectEnd:function(){}},s)),ue.add(he).css({visibility:""}),s.show&&(Q=!0,g(),v(),ue.add(he).hide().fadeIn(s.fadeSpeed||0)),setTimeout(function(){s.onInit(r,h())},0)}function O(e,t){for(var a in t)void 0!==s[a]&&e.css(t[a],s[a])}function H(a){if(a.parent&&(L=e(a.parent)).append(ue.add(he)),e.extend(s,a),g(),null!=a.handles){for(me.remove(),me=e([]),oe=a.handles?"corners"==a.handles?4:8:0;oe--;)me=me.add(t());me.addClass(s.classPrefix+"-handle").css({position:"absolute",fontSize:0,zIndex:be+1||1}),!parseInt(me.css("width"))>=0&&me.width(5).height(5),(re=s.borderWidth)&&me.css({borderWidth:re,borderStyle:"solid"}),O(me,{borderColor1:"border-color",borderColor2:"background-color",borderOpacity:"opacity"})}for(W=s.imageWidth/N||1,q=s.imageHeight/M||1,null!=a.x1&&(m(a.x1,a.y1,a.x2,a.y2),a.show=!a.hide),a.keys&&(s.keys=e.extend({shift:1,ctrl:"resize"},a.keys)),he.addClass(s.classPrefix+"-outer"),fe.addClass(s.classPrefix+"-selection"),oe=0;oe++<4;)e(pe[oe-1]).addClass(s.classPrefix+"-border"+oe);O(fe,{selectionColor:"background-color",selectionOpacity:"opacity"}),O(pe,{borderOpacity:"opacity",borderWidth:"border-width"}),O(he,{outerColor:"background-color",outerOpacity:"opacity"}),(re=s.borderColor1)&&e(pe[0]).css({borderStyle:"solid",borderColor:re}),(re=s.borderColor2)&&e(pe[1]).css({borderStyle:"dashed",borderColor:re}),ue.append(fe.add(pe).add(G)).append(me),_e&&((re=(he.css("filter")||"").match(/opacity=(\d+)/))&&he.css("opacity",re[1]/100),(re=(pe.css("filter")||"").match(/opacity=(\d+)/))&&pe.css("opacity",re[1]/100)),a.hide?w(ue.add(he)):a.show&&D&&(Q=!0,ue.add(he).fadeIn(s.fadeSpeed||0),b()),K=(ie=(s.aspectRatio||"").split(/:/))[0]/ie[1],de.add(he).unbind("mousedown",j),s.disable||s.enable===!1?(ue.unbind("mousemove",y).unbind("mousedown",x),e(window).unbind("resize",A)):((s.enable||s.disable===!1)&&((s.resizable||s.movable)&&ue.mousemove(y).mousedown(x),e(window).resize(A)),s.persistent||de.add(he).mousedown(j)),s.enable=s.disable=void 0}var D,G,F,U,N,M,L,R,E,W,q,Y,B,V,X,J,K,Q,Z,ee,te,ae,ne,ie,oe,re,se,le,ce,de=e(r),ue=t(),fe=t(),pe=t().add(t()).add(t()).add(t()),he=t().add(t()).add(t()).add(t()),me=e([]),ge={left:0,top:0},ve={left:0,top:0},be=0,we="absolute",ye={x1:0,y1:0,x2:0,y2:0,width:0,height:0},ke=document.documentElement,xe=navigator.userAgent,Ce=function(e){var t,a,o=s.keys,r=e.keyCode;if(t=isNaN(o.alt)||!e.altKey&&!e.originalEvent.altKey?!isNaN(o.ctrl)&&e.ctrlKey?o.ctrl:!isNaN(o.shift)&&e.shiftKey?o.shift:isNaN(o.arrows)?10:o.arrows:o.alt,"resize"==o.arrows||"resize"==o.shift&&e.shiftKey||"resize"==o.ctrl&&e.ctrlKey||"resize"==o.alt&&(e.altKey||e.originalEvent.altKey)){switch(r){case 37:t=-t;case 39:a=n(Z,te),Z=i(Z,te),te=n(a+t,Z),C();break;case 38:t=-t;case 40:a=n(ee,ae),ee=i(ee,ae),ae=n(a+t,ee),C(!0);break;default:return}_()}else switch(Z=i(Z,te),ee=i(ee,ae),r){case 37:S(n(Z-t,F),ee);break;case 38:S(Z,n(ee-t,U));break;case 39:S(Z+i(t,N-d(te)),ee);break;case 40:S(Z,ee+i(t,M-u(ae)));break;default:return}return!1};this.remove=function(){H({disable:!0}),ue.add(he).remove()},this.getOptions=function(){return s},this.setOptions=H,this.getSelection=h,this.setSelection=m,this.cancelSelection=I,this.update=b;var _e=(/msie ([\w.]+)/i.exec(xe)||[])[1],Pe=/opera/i.test(xe),Se=/webkit/i.test(xe)&&!/chrome/i.test(xe);for(ne=de;ne.length;)be=n(be,isNaN(ne.css("z-index"))?be:ne.css("z-index")),"fixed"==ne.css("position")&&(we="fixed"),ne=ne.parent(":not(body)");be=s.zIndex||be,_e&&de.attr("unselectable","on"),e.imgAreaSelect.keyPress=_e||Se?"keydown":"keypress",Pe&&(G=t().css({width:"100%",height:"100%",position:"absolute",zIndex:be+2||2})),ue.add(he).css({visibility:"hidden",position:we,overflow:"hidden",zIndex:be||"0"}),ue.css({zIndex:be+2||2}),fe.add(pe).css({position:"absolute",fontSize:0}),r.complete||"complete"==r.readyState||!de.is("img")?z():de.one("load",z),!D&&_e&&_e>=7&&(r.src=r.src)},e.fn.imgAreaSelect=function(t){return t=t||{},this.each(function(){e(this).data("imgAreaSelect")?t.remove?(e(this).data("imgAreaSelect").remove(),e(this).removeData("imgAreaSelect")):e(this).data("imgAreaSelect").setOptions(t):t.remove||(void 0===t.enable&&void 0===t.disable&&(t.enable=!0),e(this).data("imgAreaSelect",new e.imgAreaSelect(this,t)))}),t.instance?e(this).data("imgAreaSelect"):this}}(e)}).call(t,a(1))}]);